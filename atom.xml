<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>柳溪的个人博客</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-04-21T23:21:00.541Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>linux-sed高级用法</title>
    <link href="http://yoursite.com/2016/04/17/linux-sed/"/>
    <id>http://yoursite.com/2016/04/17/linux-sed/</id>
    <published>2016-04-17T00:06:26.000Z</published>
    <updated>2016-04-21T23:21:00.541Z</updated>
    
    <content type="html">&lt;p&gt;sed是一个流文本处理编辑器，一般我们使用的用法只是一行一行的处理文本，如果我们想对多行同时处理的话，就必须用到sed的高级命令了。举个例子，我们想要把```R与````中间的行前面都加上一个tab键，就可以用如下方法：&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;pre&gt;&lt;code&gt;cat code-tra.sed
1 #!/bin/sed -nf
2 
3 /```R/!b end01
4 n
5 :combine
6 s/^/\t/
7 H;n
8 /```/!b combine
9 x
10 s/$/\n/
11 s/```/\n/
12 p
13 
14 b end02
15 :end01
16 p
17 :end02 
$ ./code-tra.sed &amp;lt;file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;取出多余等空行，即将两行及两行以上连续的空行转换成一行空行，通过vim可以很方便地处理：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:%s/\n\{3,\}/\r\r/e
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;sed是一个流文本处理编辑器，一般我们使用的用法只是一行一行的处理文本，如果我们想对多行同时处理的话，就必须用到sed的高级命令了。举个例子，我们想要把```R与````中间的行前面都加上一个tab键，就可以用如下方法：&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>linux 管线命令</title>
    <link href="http://yoursite.com/2016/03/27/linux-%E7%AE%A1%E7%BA%BF%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/2016/03/27/linux-管线命令/</id>
    <published>2016-03-27T00:06:26.000Z</published>
    <updated>2016-04-22T07:07:49.248Z</updated>
    
    <content type="html">&lt;p&gt;如果你想要得到的数据要经过很多道工序才能得出，那么就得用上管线命令了(pipe)，管线命令使用的是 | 这个符号。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;管线命令只能处理前面一个指令传来的正确信息，也就是standard output信息，不能处理standard error信息。&lt;br&gt;每个管线后面接的第一个数据必须是指令，并且是能接受标准输入的指令，只有这样才能称为管线命令。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;常用的管线命令有：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;撷取命令: cut, grep
排序命令: sort, wc, uniq
双向重导向: tee
字符转换命令: tr, col, join, paste, expand
分割命令: split
参数代换: xargs
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;撷取命令: cut, grep&lt;br&gt;cut是撷取一行的某段，grep是撷取符合条件的那些行。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cut -d&amp;apos;分隔字符&amp;apos; -f fields 
cut -c 字符区间
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;示例代码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo $PATH | cut -d&amp;apos;:&amp;apos; -f5 取出用冒号分隔后的第5段
export | cut -c 12- 取出第12个字符以后的内容
last | cut -d&amp;apos;&amp;apos; -f1 取出空白符分割的第一段
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;grep语法&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;grep [-acinv] [--color=auto] &amp;apos;搜寻字符串&amp;apos; filename
last | grep &amp;apos;root&amp;apos; 将last当中，取出有root的那一行
last | grep -v &amp;apos;root&amp;apos; 取出没有root的那一行
last | grep &amp;apos;root&amp;apos; | cut -d&amp;apos;&amp;apos; -f1 取出root后，仅取第一栏
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;排序命令: sort, wc, uniq&lt;br&gt;sort语法：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sort [-fbMnrtuk] [file or stdin]
f :忽略大小写的差异,例如 A 与 a 视为编码相同;
-b :忽略最前面的空格符部分;
-M :以月份的名字来排序,例如 JAN, DEC 等等的排序方法;
-n :使用『纯数字』进行排序(默认是以文字型态来排序的);
-r :反向排序;
-u :就是 uniq ,相同的数据中,仅出现一行代表;
-t :分隔符,预设是用 [tab] 键来分隔，类似于cut命令的-d选项；
-k :以那个区间 (field) 来进行排序的意思，类似于cut命令的-f选项
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;示例代码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat /etc/passwd | sort -t&amp;apos;:&amp;apos; -k3
cat /etc/passwd | sort -t &amp;apos;:&amp;apos; -k 3 -n 以数字来排序
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;uniq语法&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;uniq [-ic]
-i :忽略大小写字符的不同;
-c :进行计数
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;示例代码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;last | cut -d&amp;apos;&amp;apos; -f1 | sort | uniq
last | cut -d&amp;apos;&amp;apos; -f1 | sort | uniq -c 列出每个人的登陆总数
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;wc语法&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wc [-lwm]
-l :仅列出行;
-w :仅列出多少字(英文单字);
-m :多少字符；
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;示例代码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat /etc/man.config | wc
last | grep [a-zA-Z] | grep -v &amp;apos;wtmp&amp;apos; | wc -l grep取出last中非空白行，及去除wtmp的那一行，然后统计行数，就可以了解登陆系统的总人数
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;如果你想要得到的数据要经过很多道工序才能得出，那么就得用上管线命令了(pipe)，管线命令使用的是 | 这个符号。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;管线命令只能处理前面一个指令传来的正确信息，也就是standard output信息，不能处理standard error信息。&lt;br&gt;每个管线后面接的第一个数据必须是指令，并且是能接受标准输入的指令，只有这样才能称为管线命令。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;常用的管线命令有：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;撷取命令: cut, grep
排序命令: sort, wc, uniq
双向重导向: tee
字符转换命令: tr, col, join, paste, expand
分割命令: split
参数代换: xargs
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="配置" scheme="http://yoursite.com/categories/%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>理解svg坐标系统及变化（二）</title>
    <link href="http://yoursite.com/2016/01/08/svg-viewbox%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://yoursite.com/2016/01/08/svg-viewbox（二）/</id>
    <published>2016-01-08T00:06:26.000Z</published>
    <updated>2016-04-21T23:08:00.035Z</updated>
    
    <content type="html">&lt;h4 id=&quot;svg坐标系统变化&quot;&gt;&lt;a href=&quot;#svg坐标系统变化&quot; class=&quot;headerlink&quot; title=&quot;svg坐标系统变化&quot;&gt;&lt;/a&gt;svg坐标系统变化&lt;/h4&gt;&lt;p&gt;svg能够通过坐标系统的变化来使得图形达到缩放、平移、变形和旋转的效果。&lt;br&gt;svg的transform属性和viewBox属性是两个能在元素上应用新建用户坐标系统的属性。&lt;br&gt;当svg元素应用transform属性时，这个元素复制一个当前用户坐标系统也就是viewBox，然后再对这个复制的坐标系统上进行各种变化操作，svg图形就是在这个变化后的坐标系统上作图的。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h4 id=&quot;变化操作各函数语法&quot;&gt;&lt;a href=&quot;#变化操作各函数语法&quot; class=&quot;headerlink&quot; title=&quot;变化操作各函数语法&quot;&gt;&lt;/a&gt;变化操作各函数语法&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;translate(tx [ty]),ty为可选参数，默认为0；如transform=&amp;quot;translate(100 300)&amp;quot;
scale(sx [sy]),sy为可选参数，默认与sx相等；如transform=&amp;quot;scale(2)&amp;quot;
skewX(&amp;lt;skew-angle&amp;gt;)，skewY(&amp;lt;skew-angle&amp;gt;)
rotate(&amp;lt;rotate-angle&amp;gt; [&amp;lt;cx&amp;gt; &amp;lt;cy&amp;gt;])沿着旋转中心点cx,cy旋转rotate-angle角度，默认的cx,cy为0
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;坐标系统链式及嵌套变化&quot;&gt;&lt;a href=&quot;#坐标系统链式及嵌套变化&quot; class=&quot;headerlink&quot; title=&quot;坐标系统链式及嵌套变化&quot;&gt;&lt;/a&gt;坐标系统链式及嵌套变化&lt;/h4&gt;&lt;p&gt;对坐标系统一次执行多项变化操作称为链式变化。如&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;transform=&amp;quot;rotate(45 150 170) translate(200)&amp;quot;
各项变化依次相对于前项变化进行操作
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;当一个进行了变化操作元素的子元素又进行变化操作时称为嵌套变化。&lt;br&gt;嵌套变化和链式变化一个不同点就是链式变化是针对一个元素变化，而嵌套变化是另外一个元素相对于前一个元素的变化。&lt;/p&gt;
&lt;h4 id=&quot;使用css控制svg-transform属性&quot;&gt;&lt;a href=&quot;#使用css控制svg-transform属性&quot; class=&quot;headerlink&quot; title=&quot;使用css控制svg transform属性&quot;&gt;&lt;/a&gt;使用css控制svg transform属性&lt;/h4&gt;&lt;p&gt;使用css控制svg transform属性必须满足css使用规范：变化函数的参数必须用逗号隔离，空格无效。rotate()函数不需要&lt;/p&gt;
&lt;p&gt;&lt;cx&gt; &lt;cy&gt;参数了，通过transform-origin控制。如&lt;/cy&gt;&lt;/cx&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#parrot {
    transform-origin: 50% 50%;
    transform: rotate(45deg);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;HTML和SVG的transform变化有一些区别。最主要的不同就是，HTML的坐标系统是相对于元素本身的，如上面例子的transform-origin: 50% 50%;就是元素本身的中心位置。但是SVG变化的坐标系统是用户坐标系统的一个复本。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;svg坐标系统变化&quot;&gt;&lt;a href=&quot;#svg坐标系统变化&quot; class=&quot;headerlink&quot; title=&quot;svg坐标系统变化&quot;&gt;&lt;/a&gt;svg坐标系统变化&lt;/h4&gt;&lt;p&gt;svg能够通过坐标系统的变化来使得图形达到缩放、平移、变形和旋转的效果。&lt;br&gt;svg的transform属性和viewBox属性是两个能在元素上应用新建用户坐标系统的属性。&lt;br&gt;当svg元素应用transform属性时，这个元素复制一个当前用户坐标系统也就是viewBox，然后再对这个复制的坐标系统上进行各种变化操作，svg图形就是在这个变化后的坐标系统上作图的。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>理解svg坐标系统及变化（一）</title>
    <link href="http://yoursite.com/2016/01/01/svg-viewbox%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://yoursite.com/2016/01/01/svg-viewbox（一）/</id>
    <published>2016-01-01T00:06:26.000Z</published>
    <updated>2016-04-21T06:23:13.620Z</updated>
    
    <content type="html">&lt;p&gt;The viewport, viewBox, and preserveAspectRatio&lt;br&gt;SVG元素是不受CSS盒模型控制的，这使得定位及变化这些元素没那么直观。但是当你理解呢SVG坐标系统及变化的工作原理，操控SVG将变得非常容易。本篇文章将介绍控制SVG坐标系统的三个非常重要的属性：viewport, viewBox, and preserveAspectRatio&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h4 id=&quot;The-SVG-Canvas&quot;&gt;&lt;a href=&quot;#The-SVG-Canvas&quot; class=&quot;headerlink&quot; title=&quot;The SVG Canvas&quot;&gt;&lt;/a&gt;The SVG Canvas&lt;/h4&gt;&lt;p&gt;The Canvas 是SVG画图区域，可理解为画布，理论上这画布的边界是无穷大的，但是它实际上是相对于一个有限的区域渲染在屏幕上，这个有限的区域被称作为 viwport 视口。SVG超过vieport的区域将被切除不可见。你可以通过设置svg的width和height属性来设置viwport的大小。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;svg width=&amp;quot;800&amp;quot; height=&amp;quot;600&amp;quot;&amp;gt;&amp;lt;/svg&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;但你设置完viwport的尺寸大小后，浏览器会初始化一个viwport坐标系统和用户坐标系统。&lt;br&gt;初始化的viwport坐标系统建立在viwport上，原点(0,0)设立在viwport的左上角，X轴的正方向指向右边，Y轴的正方向指向下。&lt;br&gt;初始化的用户坐标系统建立在SVG画布上，最开始与viwport坐标系统重合。用户坐标系统也叫做当前坐标系统。&lt;/p&gt;
&lt;p&gt;SVG图形区域是全部可见还是部分可见取决于SVG图形的大小和preserveAspectRatio属性的值。这将在下面详细介绍。&lt;/p&gt;
&lt;h4 id=&quot;The-viewBox&quot;&gt;&lt;a href=&quot;#The-viewBox&quot; class=&quot;headerlink&quot; title=&quot;The viewBox&quot;&gt;&lt;/a&gt;The viewBox&lt;/h4&gt;&lt;p&gt;你可以把The viewbox当作真正的坐标系统，因为SVG图形是依据这个坐标系统画在画布上面的。这个坐标系统可以比viwport坐标系统大或者小，也可以全部或者部分可见于viwport中。&lt;/p&gt;
&lt;h5 id=&quot;The-viewBox-语法&quot;&gt;&lt;a href=&quot;#The-viewBox-语法&quot; class=&quot;headerlink&quot; title=&quot;The viewBox 语法&quot;&gt;&lt;/a&gt;The viewBox 语法&lt;/h5&gt;&lt;pre&gt;&lt;code&gt;viewBox = &amp;lt;min-x&amp;gt; &amp;lt;min-y&amp;gt; &amp;lt;width&amp;gt; &amp;lt;height&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;min-x&gt; &lt;min-y&gt;决定了原点的位置，&lt;width&gt; &lt;height&gt;决定viewBox的尺寸大小，不能为负值。&lt;br&gt;通过设置viweBox的值你可以缩放、移动、甚至裁剪SVG图形。&lt;/height&gt;&lt;/width&gt;&lt;/min-y&gt;&lt;/min-x&gt;&lt;/p&gt;
&lt;h4 id=&quot;viewBox属性设置&quot;&gt;&lt;a href=&quot;#viewBox属性设置&quot; class=&quot;headerlink&quot; title=&quot;viewBox属性设置&quot;&gt;&lt;/a&gt;viewBox属性设置&lt;/h4&gt;&lt;p&gt;我们知道当我们没有设置viwBox属性时，用户坐标系统与viwport坐标系统重合的。我们可以通过设置viewBox属性的值来确立当前坐标系统。这分为两种情况：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;与vieport坐标系统的大小等比例设置&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;1.1 &lt;min-x&gt; &lt;min-y&gt;为0时的等比例设置&lt;/min-y&gt;&lt;/min-x&gt;&lt;/p&gt;
&lt;p&gt;这时候当前坐标系统将扩展到填充整个viwport区域。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;svg width=&amp;quot;800&amp;quot; height=&amp;quot;600&amp;quot; viewbox=&amp;quot;0 0 400 300&amp;quot;&amp;gt;&amp;lt;/svg&amp;gt;
viewbox=&amp;quot;0 0 400 300&amp;quot;具体做了什么呢？
1.确定当前坐标系统,原点（0，0）宽度=400px;高度=300px;
2.SVG图形相对于这个区域作图
3.缩放到与viwport大小重合,此时用户坐标系统的（0，0）对应viewport坐标系统(0,0),用户坐标系统(400,300)对应(800,600);
4.因此用户坐标系统对应到了viewport上。1user单位=2viwport单位
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;1.2 &lt;min-x&gt; &lt;min-y&gt;不为0时的等比例设置&lt;/min-y&gt;&lt;/min-x&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;svg width=&amp;quot;800&amp;quot; height=&amp;quot;600&amp;quot; viewbox=&amp;quot;100 100 200 150&amp;quot;&amp;gt;&amp;lt;/svg&amp;gt;
此时viewbox=&amp;quot;100 100 200 150&amp;quot;具体做了什么呢？
1.确定当前坐标系统,原点(100,100) 宽度=200px;高度=150px;
2.SVG图形相对于当前坐标系统作图。
3.缩放到与viwport大小重合，故此时用户坐标系统的（100，100）对应viewport坐标系统(0,0),用户坐标系统(200,150)对应(400,200);
4.用户坐标系统对应到了viewport上。因此1user单位=4viwport单位
与上面不同的是，好像SVG图形移动了。(transform=&amp;quot;translate(-100 -100)&amp;quot;).此时如果有超过当前坐标系统区域而未超过viewport区域的都可以显示出来。记住一点：图像的显示与否，与viewport大小有关。
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;与vieport坐标系统的大小不成等比例设置&lt;/p&gt;
&lt;p&gt; &lt;svg width=&quot;800&quot; height=&quot;600&quot; viewbox=&quot;0 0 1000 500&quot;/&gt;&lt;br&gt; 宽高比不成比例，默认情况下：&lt;br&gt; 1.在保持viewBox的宽高比同时，充满viewport&lt;br&gt; 2.如果按高度500-&amp;gt;600,此时宽度就成了600*1000/500=1200px;超过viewport区域；&lt;br&gt; 3.因此影射关系为1000-&amp;gt;800,500-&amp;gt;400&lt;br&gt; 4.viwbox垂直水平居中于viewport中&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果我们想自己设定viewbox在viewport中的位置，那么preserveAspectRatio属性就能派上用场了。&lt;/p&gt;
&lt;h4 id=&quot;The-preserveAspectRatio-语法&quot;&gt;&lt;a href=&quot;#The-preserveAspectRatio-语法&quot; class=&quot;headerlink&quot; title=&quot;The preserveAspectRatio 语法&quot;&gt;&lt;/a&gt;The preserveAspectRatio 语法&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;preserveAspectRatio = defer? &amp;lt;align&amp;gt; &amp;lt;meetOrSlice&amp;gt;?
defer是可选参数，只用在img元素上。
align:默认值&amp;quot;xMidYMid&amp;quot;,&amp;quot;none&amp;quot; 表示不维持宽高比例的变形缩放,此时&amp;lt;meetOrSlice&amp;gt;值被忽略。
    xMinYMin:viewBox的左边界与viewport左边界对齐，viewBox的上边界与viewport上边界对齐
    xMinYMid:viewBox的左边界与viewport左边界对齐，viewBox的中线与viewport的中线对齐
    同理可知xMinYMax，xMidYMin，xMidYMid，xMidYMax，xMaxYMin，xMaxYMid，xMaxYMax的对齐方法
&amp;lt;meetOrSlice&amp;gt;： 可选参数，默认为meet。确定整个viewBox是否在viewport内可见。
    meet:尽最大可能等比例缩放图形，但是整个viewBox在veiwport中可见。因此viewBox的宽和高边界只能满足宽或者是高边界与viewport的宽或高边界重合。
    Slice: 尽最大可能等比例缩放图形，使得viewBox可能超过viewport区域，超出区域被裁剪。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;其实meet和Slice的区别可以很简单的归结为：如果是放大meet是按viewport和viewBox对应宽高比例的最小比例放大，如果是缩小meet是按viewBox和viewport对应宽高比例的最大比例缩小。Slice则相反。&lt;br&gt;如果&lt;min-x&gt; &lt;min-y&gt;不为0，则正值代表在值都为0的基础上向左和向上平移&lt;min-x&gt; &lt;min-y&gt;值，负值代表在值都为0的基础上向右和向下平移&lt;min-x&gt; &lt;min-y&gt;值。&lt;br&gt;    &lt;svg width=&quot;800&quot; height=&quot;600&quot; viewbox=&quot;100 100 200 300&quot;/&gt;&lt;/min-y&gt;&lt;/min-x&gt;&lt;/min-y&gt;&lt;/min-x&gt;&lt;/min-y&gt;&lt;/min-x&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;The viewport, viewBox, and preserveAspectRatio&lt;br&gt;SVG元素是不受CSS盒模型控制的，这使得定位及变化这些元素没那么直观。但是当你理解呢SVG坐标系统及变化的工作原理，操控SVG将变得非常容易。本篇文章将介绍控制SVG坐标系统的三个非常重要的属性：viewport, viewBox, and preserveAspectRatio&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="css3" scheme="http://yoursite.com/tags/css3/"/>
    
  </entry>
  
  <entry>
    <title>css元素及盒模型（二）</title>
    <link href="http://yoursite.com/2015/12/12/css%E5%85%83%E7%B4%A0%E5%8F%8A%E5%85%B6%E7%9B%92%E6%A8%A1%E5%9E%8B(%E4%BA%8C)/"/>
    <id>http://yoursite.com/2015/12/12/css元素及其盒模型(二)/</id>
    <published>2015-12-12T04:54:26.000Z</published>
    <updated>2016-04-21T23:05:01.529Z</updated>
    
    <content type="html">&lt;p&gt;上节大部分讲的是块元素，这小节讨论下行内元素。行内元素见到最多的就是行内非置换元素em、a&lt;br&gt;,行内置换元素img&lt;/p&gt;
&lt;h4 id=&quot;行内元素的布局&quot;&gt;&lt;a href=&quot;#行内元素的布局&quot; class=&quot;headerlink&quot; title=&quot;行内元素的布局&quot;&gt;&lt;/a&gt;行内元素的布局&lt;/h4&gt;&lt;h6 id=&quot;基本术语&quot;&gt;&lt;a href=&quot;#基本术语&quot; class=&quot;headerlink&quot; title=&quot;基本术语&quot;&gt;&lt;/a&gt;基本术语&lt;/h6&gt;&lt;p&gt;Anonymous text 匿名文本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;p&amp;gt; I&amp;apos;m &amp;lt;em&amp;gt;so&amp;lt;/em&amp;gt; happy!&amp;lt;/p&amp;gt; 
&amp;apos;I’m&amp;apos;和 &amp;apos;happy!&amp;apos;是匿名文本
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Content area内容区:高度由font-size决定&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;img src=&quot;/img/001.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;Inline box 行内盒:高度由line-height决定&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/line-box.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;Leading: font-size和line-height的差值。差值的各一半被加到内容区的顶端和底端，组成行内盒。&lt;br&gt;Line box: Line box的边界为行内所有元素inline box的最大值和最小值之间的区域。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/line-bbox.gif&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;常用概念&quot;&gt;&lt;a href=&quot;#常用概念&quot; class=&quot;headerlink&quot; title=&quot;常用概念&quot;&gt;&lt;/a&gt;常用概念&lt;/h4&gt;&lt;p&gt;行内元素的背景应用于内容区及padding区域&lt;br&gt;非置换元素的padding,borders和margin值对行内元素的垂直效果不起作用，它们不能改变inline-height值。&lt;br&gt;置换元素的Margins和borders值能改变该元素的inline box的高度，因此也能改变包含该元素的line box高度。&lt;br&gt;inline box是通过vertical-align属性垂直对齐于line box中。vertical-align属性值有：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;top:元素inline-box的顶端与所包含的line box顶端对齐
bottom:元素inline-box的底端与所包含的line box底端对齐
text-top：将元素行内框的顶端同文本行的顶线对齐
text-bottom：文本的底端对齐
middle：中间对齐，通常使用在图片上，将图片的垂直方向的中线与文本行的中线对齐。
super：上标显示
sub：下标显示
&amp;lt;percentage&amp;gt;：百分比和长度
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;文本的基线、顶线、中线和底线，还有内容区、行内框和行框的相互关系：&lt;br&gt;&lt;img src=&quot;/img/01.gif&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;默认情况下行内元素的对齐方式为：基线对齐（vertical-align : baseline）&lt;br&gt;&lt;img src=&quot;/img/02.gif&quot;&gt;&lt;/li&gt;
&lt;li&gt;顶端对齐（vertical-align : top）&lt;br&gt;&lt;img src=&quot;/img/03.gif&quot;&gt;&lt;/li&gt;
&lt;li&gt;文本顶端对齐（vertical-align : text-top）&lt;br&gt;&lt;img src=&quot;/img/04.gif&quot;&gt;&lt;/li&gt;
&lt;li&gt;底端对齐（vertical-align : bottom）&lt;br&gt;&lt;img src=&quot;/img/05.gif&quot;&gt;&lt;/li&gt;
&lt;li&gt;文本底端对齐（vertical-align : text-bottom）&lt;br&gt;&lt;img src=&quot;/img/06.gif&quot;&gt;&lt;/li&gt;
&lt;li&gt;中间对齐（vertical-align : middle）&lt;br&gt;中线的定义为：中线位于基线的上方，与基线的距离为小写字母x高度的一半（即0.5ex），而ex同font-size相关，大部分浏览器认为1ex = 0.5em（em同样也是相对单位，不是绝对单位），因此会将基线以上四分之一em处作为中线来对齐。&lt;br&gt;&lt;img src=&quot;/img/07.gif&quot;&gt;&lt;/li&gt;
&lt;li&gt;上标和下标&lt;br&gt;上标（vertical-align:super）使元素的基线相对于基准元素的基线升高，下标（vertical-align:sub）使元素的基线降低，移动的幅度CSS规范中没有规定，由浏览器来决定。&lt;br&gt;&lt;img src=&quot;/img/08.gif&quot;&gt;&lt;/li&gt;
&lt;li&gt;长度值和百分比&lt;br&gt;和上下标类似，长度值和百分比值可使元素的基线相对于基准元素的基线升高（正值）或者降低（负值）。上下标的移动尺寸是由浏览器确定的，而设定长度值或者百分比，可以精确控制文字上下移动的幅度。百分比与行高有关（line-height）&lt;br&gt;&lt;img src=&quot;/img/09.gif&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;行高的确定原则：&lt;br&gt;由前面Leading的定义，我们可知，改变一个元素的行高值能引起与相邻元素的重叠。如当行高小于字体大小的时候。&lt;br&gt;为避免这种情况出现，可采用以下几种方法避免。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;使用em单位，使得line-heigth的高度跟随元素本身font-size变化。&lt;/p&gt;
&lt;p&gt; p {line-height: 1em;}&lt;br&gt; big {font-size: 250%; line-height: 1em;}&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2.设置缩放比例值&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;body {line-height: 1.5;} 1.5倍当前字体值
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;增加盒属性&quot;&gt;&lt;a href=&quot;#增加盒属性&quot; class=&quot;headerlink&quot; title=&quot;增加盒属性&quot;&gt;&lt;/a&gt;增加盒属性&lt;/h4&gt;&lt;p&gt;由前面讨论可知，padding, margins, 和 borders 可以应用于行内非置换元素. 但是不能改变行高值，也就不能改变行内元素的整体布局了。&lt;br&gt;如果你为行内元素设置border属性，那么border边界默认是元素的内容区域，也就是font-size控制区，而不是行高值区域，当你再设置padding值时，border会远离文本相应的值距离。但是文本的位置都不会变动，这和我们所说的理论不相冲突。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;span {border: 1px solid black;}
span {padding: 4px;border: 1px solid black;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;效果分别如下：&lt;br&gt;&lt;img src=&quot;/img/pad.jpg&quot;&gt;&lt;br&gt;&lt;img src=&quot;/img/pad1.jpg&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;行内置换元素&quot;&gt;&lt;a href=&quot;#行内置换元素&quot; class=&quot;headerlink&quot; title=&quot;行内置换元素&quot;&gt;&lt;/a&gt;行内置换元素&lt;/h4&gt;&lt;p&gt;前面我们简单谈到过，置换元素的Margins和borders值能改变该元素的inline box的高度，因此也能改变包含该元素的line box高度。置换元素为什么也有自己的inline box的高度也就是行高值呢，因为，置换元素需要inline box来垂直定位自己，比如&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;p {font-size: 15px; line-height: 18px;}
img {vertical-align: 50%;}
&amp;lt;p&amp;gt;the image in this sentence &amp;lt;img src=&amp;quot;test.gif&amp;quot; alt=&amp;quot;test image&amp;quot;&amp;gt;will be raised 9 pixels.&amp;lt;/p&amp;gt;
图片相对于基线提升9px
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;行内块元素&quot;&gt;&lt;a href=&quot;#行内块元素&quot; class=&quot;headerlink&quot; title=&quot;行内块元素&quot;&gt;&lt;/a&gt;行内块元素&lt;/h4&gt;&lt;p&gt;行内块元素在行内的布局就和行内置换元素一样。也就是说，行内块元素基于基线对齐。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;上节大部分讲的是块元素，这小节讨论下行内元素。行内元素见到最多的就是行内非置换元素em、a&lt;br&gt;,行内置换元素img&lt;/p&gt;
&lt;h4 id=&quot;行内元素的布局&quot;&gt;&lt;a href=&quot;#行内元素的布局&quot; class=&quot;headerlink&quot; title=&quot;行内元素的布局&quot;&gt;&lt;/a&gt;行内元素的布局&lt;/h4&gt;&lt;h6 id=&quot;基本术语&quot;&gt;&lt;a href=&quot;#基本术语&quot; class=&quot;headerlink&quot; title=&quot;基本术语&quot;&gt;&lt;/a&gt;基本术语&lt;/h6&gt;&lt;p&gt;Anonymous text 匿名文本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;p&amp;gt; I&amp;apos;m &amp;lt;em&amp;gt;so&amp;lt;/em&amp;gt; happy!&amp;lt;/p&amp;gt; 
&amp;apos;I’m&amp;apos;和 &amp;apos;happy!&amp;apos;是匿名文本
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Content area内容区:高度由font-size决定&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>css元素及盒模型（一）</title>
    <link href="http://yoursite.com/2015/12/11/css%E5%85%83%E7%B4%A0%E5%8F%8A%E5%85%B6%E7%9B%92%E6%A8%A1%E5%9E%8B(%E4%B8%80)/"/>
    <id>http://yoursite.com/2015/12/11/css元素及其盒模型(一)/</id>
    <published>2015-12-11T04:54:26.000Z</published>
    <updated>2016-04-21T23:05:02.299Z</updated>
    
    <content type="html">&lt;p&gt;CSS中，每个元素会产生一个或者多个矩形盒，称为元素盒。元素盒的中心区域是内容区域，由内向外依次被padding，border,margin区域包裹。这些包裹的区域都可以设置为0，其中只有margin能设负值。&lt;br&gt;内容区域的背景，默认是延伸至border边界下面。这可以在border样式设置为虚线时清楚的看到。border的颜色在没有设置的情况下，默认为元素内容的颜色。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h4 id=&quot;元素分类及不同盒模型&quot;&gt;&lt;a href=&quot;#元素分类及不同盒模型&quot; class=&quot;headerlink&quot; title=&quot;元素分类及不同盒模型&quot;&gt;&lt;/a&gt;元素分类及不同盒模型&lt;/h4&gt;&lt;h6 id=&quot;Nonreplaced-element-非置换元素&quot;&gt;&lt;a href=&quot;#Nonreplaced-element-非置换元素&quot; class=&quot;headerlink&quot; title=&quot;Nonreplaced element 非置换元素&quot;&gt;&lt;/a&gt;Nonreplaced element 非置换元素&lt;/h6&gt;&lt;p&gt;内容包含在文档中的元素。如p元素，内容包含在元素中。&lt;/p&gt;
&lt;h6 id=&quot;Replaced-element-置换元素&quot;&gt;&lt;a href=&quot;#Replaced-element-置换元素&quot; class=&quot;headerlink&quot; title=&quot;Replaced element 置换元素&quot;&gt;&lt;/a&gt;Replaced element 置换元素&lt;/h6&gt;&lt;p&gt;作为一个内容不被包含在文档中的占位符。如img元素，指向一个image文件，这个外部文件插入img元素所在位置。其他置换元素还有input,button等等。&lt;/p&gt;
&lt;h6 id=&quot;Root-element-根元素&quot;&gt;&lt;a href=&quot;#Root-element-根元素&quot; class=&quot;headerlink&quot; title=&quot;Root element 根元素&quot;&gt;&lt;/a&gt;Root element 根元素&lt;/h6&gt;&lt;p&gt;文档树顶端的元素。一般是html元素。&lt;/p&gt;
&lt;h6 id=&quot;Block-element-块元素&quot;&gt;&lt;a href=&quot;#Block-element-块元素&quot; class=&quot;headerlink&quot; title=&quot;Block element 块元素&quot;&gt;&lt;/a&gt;Block element 块元素&lt;/h6&gt;&lt;h6 id=&quot;Block-box-块盒&quot;&gt;&lt;a href=&quot;#Block-box-块盒&quot; class=&quot;headerlink&quot; title=&quot;Block box 块盒&quot;&gt;&lt;/a&gt;Block box 块盒&lt;/h6&gt;&lt;p&gt;块级元素产生的盒子，如div、p等。任何元素都可以通过设置display:block来产生块盒。&lt;/p&gt;
&lt;h6 id=&quot;Inline-box-行内盒&quot;&gt;&lt;a href=&quot;#Inline-box-行内盒&quot; class=&quot;headerlink&quot; title=&quot;Inline box 行内盒&quot;&gt;&lt;/a&gt;Inline box 行内盒&lt;/h6&gt;&lt;p&gt;strong、span等产生的盒子。任何元素都可以通过设置display:inline来产生行内盒。&lt;/p&gt;
&lt;h6 id=&quot;Inline-block-box-行内块盒&quot;&gt;&lt;a href=&quot;#Inline-block-box-行内块盒&quot; class=&quot;headerlink&quot; title=&quot;Inline-block box 行内块盒&quot;&gt;&lt;/a&gt;Inline-block box 行内块盒&lt;/h6&gt;&lt;p&gt;简单的说就是不换行的块盒。&lt;/p&gt;
&lt;h6 id=&quot;containing-block&quot;&gt;&lt;a href=&quot;#containing-block&quot; class=&quot;headerlink&quot; title=&quot;containing block&quot;&gt;&lt;/a&gt;containing block&lt;/h6&gt;&lt;p&gt;元素盒的定位环境。通常情况下是产生list item或者块盒的最近祖先元素的内容区域。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;body&amp;gt;
    &amp;lt;div&amp;gt;
        &amp;lt;p&amp;gt;This is a paragraph.&amp;lt;/p&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/body&amp;gt;
p的包含块为div,div的包含块为body,body的包含块为html元素，html元素产生的盒为initial containing block原始包含块。有点特殊的地方是它的尺寸大小不是由根元素的内容区域决定的，而是viewport浏览
器窗口大小决定。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;需要注意的是，任何元素可以通过display属性来产生不同的盒模型，不代表能使得元素类型发生改变。&lt;br&gt;常用元素的类型&lt;/p&gt;
&lt;table&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;Element &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Type &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Subtype &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Notes&lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;a &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;special &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;abbr &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;phrase &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;acronym &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;phrase &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;address &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Behaves similarly to p in common practice&lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;blockquote &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Must contain at least one block element when the declared !DOCTYPE is Strict&lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;body &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Encloses the entire document canvas; commonly takes on a margin (in IE, Firefox, and Safari) or padding (in Opera) of 10px in screen media&lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;cite &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;phrase &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;div &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;em &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;phrase &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;fieldset &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Commonly rendered by default with border: 1px black;&lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;form &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;h1 … h6 &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;heading &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;input &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;formctrl &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;img &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;special &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;label &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;formctrl &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;li &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt;Element type not specified in Document Type Definition, but this element may contain either block or inline elements; the complete CSS 2.1 Recommendation sets aside a display value for list items&lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;ol &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;list &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;p &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt;May only contain inline elements; commonly rendered with top and bottom margins&lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;span &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;special &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;strong &lt;/td&gt;&lt;br&gt;      &lt;td&gt;inline &lt;/td&gt;&lt;br&gt;      &lt;td&gt;phrase &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;table &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;      &lt;td&gt; &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;   &lt;tr&gt;&lt;br&gt;      &lt;td&gt;ul &lt;/td&gt;&lt;br&gt;      &lt;td&gt;block &lt;/td&gt;&lt;br&gt;      &lt;td&gt;list &lt;/td&gt;&lt;br&gt;      &lt;td&gt;  &lt;/td&gt;&lt;br&gt;   &lt;/tr&gt;&lt;br&gt;&lt;/table&gt;


&lt;h4 id=&quot;元素水平定位原理&quot;&gt;&lt;a href=&quot;#元素水平定位原理&quot; class=&quot;headerlink&quot; title=&quot;元素水平定位原理&quot;&gt;&lt;/a&gt;元素水平定位原理&lt;/h4&gt;&lt;h6 id=&quot;非置换元素&quot;&gt;&lt;a href=&quot;#非置换元素&quot; class=&quot;headerlink&quot; title=&quot;非置换元素&quot;&gt;&lt;/a&gt;非置换元素&lt;/h6&gt;&lt;p&gt;默认情况下元素的width为内容区域的宽度。一个块盒水平的七属性的和等于包含块内容区域。七属性分别为：margin-left,border-left,padding-left,width,padding-right,border-right,and margin-right&lt;br&gt;水平七属性中只有width,margin-left,margin-right能设置auto值。auto值的确定由包含块width值和七属性值已确定值的和的差值决定。比如&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;div {width: 500px;}
p {margin-left: auto; margin-right: 100px;width: 100px;} /* &amp;apos;auto&amp;apos; left margin evaluates to 300px */
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果都是设置的确定值，而和与包含块width不相等时，那么margin-right被强制为auto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;div {width: 500px;}
p {margin-left: 100px; margin-right: 100px;width: 100px;} /* right margin forced to be 300px */
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;其他情况：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;div {width: 500px;}
p {width: 300px; margin-left: auto; margin-right: auto;} /* each margin is 100 pixels wide, because (500-300)/2 = 100 */

div {width: 500px;}
p {margin-left: auto; margin-right: 100px;width: auto;} /* left margin evaluates to 0; width becomes 400px */
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;当margin值为负数时：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;div {width: 500px; border: 3px solid black;}
p.wide {margin-left: 10px; width: auto; margin-right: -50px; }
10px + 0 + 0 + 540px + 0 + 0 - 50px = 500px  /* 计算出width值为540px*/因此超出包含块边界区域
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;百分数值&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;p style=&amp;quot;width: 67%; padding-right: 5%; padding-left: 5%; margin-right: auto;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;margin-left: 5%;”&amp;gt;playing percentages&lt;/p&gt; /&lt;em&gt; 18% (100% - 67% - 5% - 5% - 5%)&lt;/em&gt;/&lt;p&gt;&lt;/p&gt;
&lt;h6 id=&quot;置换元素&quot;&gt;&lt;a href=&quot;#置换元素&quot; class=&quot;headerlink&quot; title=&quot;置换元素&quot;&gt;&lt;/a&gt;置换元素&lt;/h6&gt;&lt;p&gt;与非置换元素不同的一点就是：如果width设置为auto，那么宽度等于置换元素本来的宽度，当设置宽度的具体值时，高度与宽度始终维持同一比例，除非也手动设置了高度的具体值。&lt;/p&gt;
&lt;h4 id=&quot;元素垂直定位原理&quot;&gt;&lt;a href=&quot;#元素垂直定位原理&quot; class=&quot;headerlink&quot; title=&quot;元素垂直定位原理&quot;&gt;&lt;/a&gt;元素垂直定位原理&lt;/h4&gt;&lt;p&gt;一个元素的内容决定了元素的默认高度。如果内容高度超出了高度设定值，可以通过overflow属性来控制内容的显示与否。在CSS2以后，非置换元素的高度值不能省略，必须设置为auto或者其他具体的非负值，除了使用百分比的特定情况。&lt;br&gt;与水平元素的定位一样，一个块盒垂直的七属性的和等于包含块内容区域的高度。有趣的是，如果margin-top或者margin-bottom设置为auto那么都自动变为0,也就不能很容易的垂直定为一个块盒了。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;div style=&amp;quot;height: 6em;&amp;quot;&amp;gt;
    &amp;lt;p style=&amp;quot;height: 50%;&amp;quot;&amp;gt;Half as tall&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
/* p的高度将为3em，如果要将P垂直剧中于div,那么必须设置margin-top与margin-bottom的值为25%，而不能像水平元素那样设置为auto，因为在垂直方向上margin值为auto的值为0*/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果父元素的高度设置为auto,那么子元素的百分比高度将被重置为auto,也就是p的高度和div的高度都等于内容的高度。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;div style=&amp;quot;height:auto&amp;quot;&amp;gt;
    &amp;lt;p style=&amp;quot;height: 50%;&amp;quot;&amp;gt;NOT half as tall; height reset to auto&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;自动高度&quot;&gt;&lt;a href=&quot;#自动高度&quot; class=&quot;headerlink&quot; title=&quot;自动高度&quot;&gt;&lt;/a&gt;自动高度&lt;/h4&gt;&lt;p&gt;由上面的例子可以得出，当高度值设置为auto时，块盒的高度只要包裹行内元素的line box就可以了。后面会介绍line box的范围为行内所有元素inline-height的最小值到最大值的区域。就如p元素相对于它离开的行内元素。&lt;br&gt;如果块盒下只有块盒子元素，就如div相对于p元素，那么它默认的高度值为子元素border-box以内的内容。不包含margin区域。p元素的margin值会伸出div外，参与相邻元素margin塌陷值的计算。但是如果它有padding区域或者border区域，那么子元素的marigin值就包含进了div元素。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;div style=&amp;quot;height: auto;background: silver;&amp;quot;&amp;gt;
    &amp;lt;p style=&amp;quot;margin-top: 2em; margin-bottom: 2em;&amp;quot;&amp;gt;A paragraph!&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div style=&amp;quot;height: auto; border-top: 1px solid; border-bottom: 1px solid;background: silver;&amp;quot;&amp;gt;
    &amp;lt;p style=&amp;quot;margin-top: 2em; margin-bottom: 2em;&amp;quot;&amp;gt;Another paragraph!&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;margin塌陷&quot;&gt;&lt;a href=&quot;#margin塌陷&quot; class=&quot;headerlink&quot; title=&quot;margin塌陷&quot;&gt;&lt;/a&gt;margin塌陷&lt;/h4&gt;&lt;p&gt;因为CSS中存在一个margin collapse，即边界塌陷或者说边界重叠。对于上下两个并列的div块而言，上面div的margin-bottom和下面div的margin-top会塌陷，也就是会取上下两者margin里最大值作为显示值。如果遇到上下两个并排内容块的安排，最好只设置其中每个块上或下margin的一处即可。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;ul&amp;gt;
       &amp;lt;li&amp;gt; list1
       &amp;lt;li&amp;gt; list2
&amp;lt;/ul&amp;gt;
&amp;lt;h1&amp;gt; heading
ul {margin-bottom: 15px;background-color: grey;border: 1px solid;}
li {margin-top: 10px; margin-bottom: 20px;}
h1 {margin-top: 28px;}
由上面可知，ul的高度是不包括list1的margin-top,和list2的margin-bottom;通过设置
ul {margin-bottom: 15px; border: 1px solid;} margin值就包含在了ul的高度中。
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;负margin及塌陷&quot;&gt;&lt;a href=&quot;#负margin及塌陷&quot; class=&quot;headerlink&quot; title=&quot;负margin及塌陷&quot;&gt;&lt;/a&gt;负margin及塌陷&lt;/h4&gt;&lt;p&gt;对于上下两个并列的元素块，会取上下两者margin绝对值最大的margin值。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;CSS中，每个元素会产生一个或者多个矩形盒，称为元素盒。元素盒的中心区域是内容区域，由内向外依次被padding，border,margin区域包裹。这些包裹的区域都可以设置为0，其中只有margin能设负值。&lt;br&gt;内容区域的背景，默认是延伸至border边界下面。这可以在border样式设置为虚线时清楚的看到。border的颜色在没有设置的情况下，默认为元素内容的颜色。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>js逻辑运算符&amp;&amp;和||的另类应用</title>
    <link href="http://yoursite.com/2015/12/04/%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6&&%E5%92%8C%7C%7C%E7%9A%84%E5%8F%A6%E7%B1%BB%E5%BA%94%E7%94%A8/"/>
    <id>http://yoursite.com/2015/12/04/逻辑运算符&&和||的另类应用/</id>
    <published>2015-12-04T05:36:26.000Z</published>
    <updated>2015-12-05T05:08:22.841Z</updated>
    
    <content type="html">&lt;p&gt;逻辑运算符“&amp;amp;&amp;amp;”、“||”是对操作数进行布尔算术运算，我们经常碰到的是和关系运算符配合使用的情况。但是对真值和假值的布尔操作却了解不多。下面我们就从三个层次加深对逻辑运算符的理解。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;1-连接两个关系表达式-操作数总是布尔值）&quot;&gt;&lt;a href=&quot;#1-连接两个关系表达式-操作数总是布尔值）&quot; class=&quot;headerlink&quot; title=&quot;1.连接两个关系表达式(操作数总是布尔值）&quot;&gt;&lt;/a&gt;1.连接两个关系表达式(操作数总是布尔值）&lt;/h4&gt;&lt;p&gt;关系运算符： “==”、“===”、“!==”、“!===”、“&amp;lt;”、“&amp;lt;=”、“&amp;gt;”和“&amp;gt;=”用于测试两个值之间的关系，关系表达式总是返回一个布尔值。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;x == 1 &amp;amp;&amp;amp; y==2     //只有都为true的时候，结果才是true
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;2-连接真值或假值&quot;&gt;&lt;a href=&quot;#2-连接真值或假值&quot; class=&quot;headerlink&quot; title=&quot;2.连接真值或假值&quot;&gt;&lt;/a&gt;2.连接真值或假值&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;除了false、null、undefined、0、-0、NaN和&amp;quot;&amp;quot; 外，
其他的值包括所有对象都是真值
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;当“&amp;amp;&amp;amp;” 对真值进行布尔操作时，只有当两个操作数都是真值时，才返回一个真值。注意返回的是一个真值而不是true。否则，至少一个是假值时则返回假值。&lt;/p&gt;
&lt;h4 id=&quot;3-返回的真值或假值是什么&quot;&gt;&lt;a href=&quot;#3-返回的真值或假值是什么&quot; class=&quot;headerlink&quot; title=&quot;3.返回的真值或假值是什么&quot;&gt;&lt;/a&gt;3.返回的真值或假值是什么&lt;/h4&gt;&lt;p&gt;进行“&amp;amp;&amp;amp;”操作时，运算符首先计算左操作数的值，如果是假值，那么就返回这个假值。如果是真值，那么表达式的结果就依赖于右操作数的值，如果右操作数为真值，那么结果就返回这个真值，如果是假值，就返回这个假值。也就是说，当左操作数是真值时，“&amp;amp;&amp;amp;”运算符将右操作数的值作为整个表达式的结果。&lt;/p&gt;
&lt;p&gt;我们可以利用后两点进行一些复杂表达式运算。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if(a&amp;gt;5){
    alert(&amp;quot;yes&amp;quot;);
}
等价于
a&amp;gt;5 &amp;amp;&amp;amp; alert(&amp;quot;yes&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;来个复杂点的。下面是一个很常见的条件判断语句，我们经常用if…elseif…else语句，或者是switch语句&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;var b;
if(a == 5){
    b = 1;
}
else if(a == 10){
    b = 2;
}
else if(a == 12){
    b = 3;
}
else if(a == 15){
    b = 4;
}
else {
    b = 0;
}
等价于
var b;
switch(a){
    case 5 : b = 1;
break;
    case 10 : b = 2;
break;
    case 12 : b = 3;
break;
    case 15 : b = 4;
break;
    default : b = 0;
break;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;学习了逻辑运算符的另类应用，我们可以简单的这么写&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;var b = (a == 5 &amp;amp;&amp;amp; 1) || (a == 10 &amp;amp;&amp;amp; 2) || (a == 12 &amp;amp;&amp;amp; 3) || (a == 15 &amp;amp;&amp;amp; 4) || 0;
或者，更优化点代码，这么写
var b={&amp;apos;5&amp;apos;:1,&amp;apos;10&amp;apos;:2,&amp;apos;12&amp;apos;:3,&amp;apos;15&amp;apos;:4}[a] || 0;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;因为对象的属性是一个具体的值，而不可能是一个范围，所以当我们遇到这种情况时,只能这么写了&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;var b = (a &amp;gt; 15 &amp;amp;&amp;amp; 1) || (a &amp;gt; 12 &amp;amp;&amp;amp; 2) || (a &amp;gt; 10 &amp;amp;&amp;amp; 3) || (a &amp;gt; 5 &amp;amp;&amp;amp; 4) || 0;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;最后说下另外一个逻辑运算符-“-”&quot;&gt;&lt;a href=&quot;#最后说下另外一个逻辑运算符-“-”&quot; class=&quot;headerlink&quot; title=&quot;最后说下另外一个逻辑运算符 “!”&quot;&gt;&lt;/a&gt;最后说下另外一个逻辑运算符 “!”&lt;/h4&gt;&lt;p&gt;单独说“!”是因为它和“&amp;amp;&amp;amp;”与“||”不同，“!”运算符首先将操作数转换为布尔值，然后再对布尔值进行求反。因此“!”总是返回true或者false,并且，可以通过使用两次逻辑非运算来得到一个值的等价布尔值：!!x&lt;br&gt;这也是我们会经常发现if语句这么写的原因：if(!!x){…}&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;逻辑运算符“&amp;amp;&amp;amp;”、“||”是对操作数进行布尔算术运算，我们经常碰到的是和关系运算符配合使用的情况。但是对真值和假值的布尔操作却了解不多。下面我们就从三个层次加深对逻辑运算符的理解。&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="javascript" scheme="http://yoursite.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>利用relative与absolute做照片墙</title>
    <link href="http://yoursite.com/2015/11/27/%E5%88%A9%E7%94%A8relative%E4%B8%8Eabsolute%E5%81%9A%E7%85%A7%E7%89%87%E5%A2%99/"/>
    <id>http://yoursite.com/2015/11/27/利用relative与absolute做照片墙/</id>
    <published>2015-11-27T00:06:26.000Z</published>
    <updated>2016-04-21T06:25:04.798Z</updated>
    
    <content type="html">&lt;p&gt;relative相对定位，元素不脱离文本流，移动元素后会形成空的占位符，不会对其他元素的排版造成影响。&lt;br&gt;absolute绝对定位，元素脱离文本流，相对于最近的已定位的祖先元素定位，未设置定位尺寸的情况下，浮动于原来所占文本流的位置上。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;这也是为什么经常会出现一个元素相对定位后，另一个元素绝对定位的原因。父元素相对定位，不脱离文本流，子元素绝对定位浮动于父元素子上，这种类似于ps中图层的技巧在做照片墙的时候非常有用。&lt;/p&gt;
&lt;p&gt;进行排版时，为对不同屏幕尺寸进行适配，我们一般用百分比进行布局，如一行四列的话就设置框的宽度:width:25%,那么高度怎么设置呢，以前我一直是用具体的数值，但是会有一个问题，那就是在宽屏幕下会有图片拉长失真的效果，不能等比例缩放。&lt;/p&gt;
&lt;p&gt;直到有一次我发现了padding-top/padding-bottom属性设置成百分比，是相对于块级元素宽度设置时，一下子让我如获珍宝。例如，我们设置一个列表，&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;li{
    width: 25%;
    padding-bottom: 25%;
    position: relative;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这样就形成了一个能按屏幕等比例缩放的正方形块级框，里面的子元素再设置为绝对定位，就能浮于这个父级元素框之上显示内容了。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;li div{
    width: 90%;
    height: 90%;
    position: absolute;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这样一个完美的照片墙就能做出来了。&lt;/p&gt;
&lt;p&gt;当然除了这种方法外，也可以将元素宽和高的单位设置成rem,（rem的值通过js根据屏幕的像素宽度动态计算出来）&lt;br&gt;也能使得元素等比例缩放。每行的元素可以通过两端对齐或者其他对齐方式排列整齐。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;relative相对定位，元素不脱离文本流，移动元素后会形成空的占位符，不会对其他元素的排版造成影响。&lt;br&gt;absolute绝对定位，元素脱离文本流，相对于最近的已定位的祖先元素定位，未设置定位尺寸的情况下，浮动于原来所占文本流的位置上。&lt;/p&gt;
    
    </summary>
    
      <category term="配置" scheme="http://yoursite.com/categories/%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="javascript" scheme="http://yoursite.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>利用border属性画三角形</title>
    <link href="http://yoursite.com/2015/11/18/%E5%88%A9%E7%94%A8border%E5%B1%9E%E6%80%A7%E7%94%9F%E6%88%90%E4%B8%89%E8%A7%92%E5%BD%A2/"/>
    <id>http://yoursite.com/2015/11/18/利用border属性生成三角形/</id>
    <published>2015-11-18T00:06:26.000Z</published>
    <updated>2016-04-21T06:27:56.701Z</updated>
    
    <content type="html">&lt;p&gt;对于border属性大家都不陌生，我们经常会这么设置一个元素的border属性：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;div.rec{
    border-left:20px solid #F00;
    border-right:20px solid #F00;
    border-top:20px solid #00F;
    border-bottom:20px solid #00F;
    width:100px;
    height:100px;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;div class=&quot;rec&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;这个图形有一个极限状态，那就是当width和height设置为0后，就是四个三角形围成的一个矩形。&lt;/p&gt;
&lt;div class=&quot;triangle&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;我们可以利用这点生成不同方向的三角形。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;div{
    border-left:100px solid transparent;
    border-right:100px solid transparent;
    border-bottom:100px solid #00F;
    width:500px;
    height:500px;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;当把左右border颜色设置为透明，border-top不设置时，就可以生成一个向上的三角形了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;对于border属性大家都不陌生，我们经常会这么设置一个元素的border属性：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;div.rec{
    border-left:20px solid #F00;
    border-right:20px solid #F00;
    border-top:20px solid #00F;
    border-bottom:20px solid #00F;
    width:100px;
    height:100px;
    }
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>elasticsearch之数据导入</title>
    <link href="http://yoursite.com/2015/11/17/elasctisearch/"/>
    <id>http://yoursite.com/2015/11/17/elasctisearch/</id>
    <published>2015-11-17T00:06:26.000Z</published>
    <updated>2016-04-21T06:08:49.721Z</updated>
    
    <content type="html">&lt;h4 id=&quot;数据批量导入&quot;&gt;&lt;a href=&quot;#数据批量导入&quot; class=&quot;headerlink&quot; title=&quot;数据批量导入&quot;&gt;&lt;/a&gt;数据批量导入&lt;/h4&gt;&lt;p&gt;通过bulk API可以批量导入新建的文档。格式由两个JSON格式的文档组成，每个文档由空行隔开，各占一行。第一个文档由操作类型如(index，index会覆盖已存在的相同ID的文档，如果不想覆盖则用create操作方法）和元数据组成,如(index,type,ID)；第二个文档则是要index文档的内容。文档代码示例如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{&amp;quot;index&amp;quot;:{&amp;quot;_index&amp;quot;:&amp;quot;get-together&amp;quot;, &amp;quot;_type&amp;quot;:&amp;quot;group&amp;quot;, &amp;quot;_id&amp;quot;:&amp;quot;10&amp;quot;}}
{&amp;quot;name&amp;quot;:&amp;quot;Elasticsearch Bucharest&amp;quot;}
{&amp;quot;index&amp;quot;:{&amp;quot;_index&amp;quot;:&amp;quot;get-together&amp;quot;, &amp;quot;_type&amp;quot;:&amp;quot;group&amp;quot;, &amp;quot;_id&amp;quot;:&amp;quot;11&amp;quot;}}
{&amp;quot;name&amp;quot;:&amp;quot;Big Data Bucharest&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;然后在终端输入以下命令&lt;br&gt;REQUESTS_FILE=/tmp/test_bulk&lt;br&gt;curl -XPOST localhost:9200/_bulk –data-binary @$REQUESTS_FILE&lt;br&gt;我们也可以把index,type类型放入url中，这样就不必要在每个操作中都注明了。&lt;br&gt;curl -XPOST localhost:9200/get-together/group/_bulk –data-binary @$REQUESTS_FILE&lt;br&gt;此时批量导入的文档就可以简写成以下这样了。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{ &amp;quot;index&amp;quot;: {}}
{&amp;quot;name&amp;quot;:&amp;quot;Elasticsearch Bucharest&amp;quot;}
{ &amp;quot;index&amp;quot;: {}}
{&amp;quot;name&amp;quot;:&amp;quot;Big Data Bucharest&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如何快速生成这种格式的数据，我个人方面使用的技巧就是使用linux sed命令处理文档。假如我们的文档如下：&lt;br&gt;{“BookNum”:1,”BookDescription”:”With”,”Publisher”:”The Pragmatic Programmers”,”By”:”Mike Clark”,”ISBN”:”978-0-9787-3922-5”,”Year”:”2008”,”Pages”:”464”},{“BookNum”:2,”BookDescription”:”With “,”Publisher”:”The Pragmatic Programmers”,”By”:”Mike Clark”,”ISBN”:”978-0-9787-3922-5”,”Year”:”2008”,”Pages”:”464”},{“BookNum”:3,”BookDescription”:”Rails “,”By”:[“Sam Ruby”,”Dave Thomas”,”David Heinemeier Hansson”],”ISBN”:”978-1-93435-616-6”,”Year”:”2009”,”Pages”:”792”}&lt;br&gt;通过简单的一个命令就可以生成上面那种格式了。-i 代表直接在当前目录的json文档上进行修改。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sed -i -e &amp;apos;s/},{/}\n{ &amp;quot;index&amp;quot;: {}}\n{/g&amp;apos; json文档
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;mappings的设置&quot;&gt;&lt;a href=&quot;#mappings的设置&quot; class=&quot;headerlink&quot; title=&quot;mappings的设置&quot;&gt;&lt;/a&gt;mappings的设置&lt;/h4&gt;&lt;p&gt;通过上面批量导入的文档，elasticsearch会自动探测文档字段的类型。我们可以通过以下命令查询当前文档mappings的设置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl &amp;apos;localhost:9200/get-together/group/_mapping?pretty&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;但是有时候自动探测出的字段类型并不是我们想要的，因此在导入文档前，我们首先要设置好mapping值。我们可以通过在当前目录下建立mapping.json文档，然后通过从外部文件引入的方式在建立数据库的时候设置好mapping值以及其他的一些配置。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -s -XPOST &amp;quot;localhost:9200/get-together&amp;quot; -d@mapping.json
mapping.json示例文档如下：这个示例文件通过settings和mappings两个设置几乎覆盖了elasticsearch的大部分内容点。以后再具体分析。
{
      &amp;quot;settings&amp;quot; : {
            &amp;quot;number_of_shards&amp;quot; : 2,
            &amp;quot;number_of_replicas&amp;quot; : 1,
            &amp;quot;index&amp;quot;: {
                  &amp;quot;analysis&amp;quot;: {
                    &amp;quot;analyzer&amp;quot;: {
                          &amp;quot;myCustomAnalyzer&amp;quot;: {
                                &amp;quot;type&amp;quot;: &amp;quot;custom&amp;quot;,
                                &amp;quot;tokenizer&amp;quot;: &amp;quot;myCustomTokenizer&amp;quot;,
                                &amp;quot;filter&amp;quot;: [&amp;quot;myCustomFilter1&amp;quot;, &amp;quot;myCustomFilter2&amp;quot;],
                                &amp;quot;char_filter&amp;quot;: [&amp;quot;myCustomCharFilter&amp;quot;]
                          }
                    },
                    &amp;quot;tokenizer&amp;quot;: {
                          &amp;quot;myCustomTokenizer&amp;quot;: {
                                &amp;quot;type&amp;quot;: &amp;quot;letter&amp;quot;
                          },
                          &amp;quot;myCustomNGramTokenizer&amp;quot;: {
                            &amp;quot;type&amp;quot; : &amp;quot;ngram&amp;quot;,
                            &amp;quot;min_gram&amp;quot; : 2,
                            &amp;quot;max_gram&amp;quot; : 3
                          }

                },
                &amp;quot;filter&amp;quot;: {
                      &amp;quot;myCustomFilter1&amp;quot;: {
                            &amp;quot;type&amp;quot;: &amp;quot;lowercase&amp;quot;
                      },
                      &amp;quot;myCustomFilter2&amp;quot;: {
                            &amp;quot;type&amp;quot;: &amp;quot;kstem&amp;quot;
                      }
                },
                &amp;quot;char_filter&amp;quot;: {
                      &amp;quot;myCustomCharFilter&amp;quot;: {
                            &amp;quot;type&amp;quot;: &amp;quot;mapping&amp;quot;,
                        &amp;quot;mappings&amp;quot;: [&amp;quot;ph=&amp;gt;f&amp;quot;, &amp;quot; u =&amp;gt; you &amp;quot;, &amp;quot;ES=&amp;gt;Elasticsearch&amp;quot;]
                      }
                    }
            }
        }
    },
      &amp;quot;mappings&amp;quot; : {
            &amp;quot;group&amp;quot; : {
                  &amp;quot;_source&amp;quot; : {
                    &amp;quot;enabled&amp;quot; : true
                  },
                  &amp;quot;_all&amp;quot; : {
                    &amp;quot;enabled&amp;quot; : true
                  },
                  &amp;quot;properties&amp;quot; : {
                    &amp;quot;organizer&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; },
                    &amp;quot;name&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; },
                    &amp;quot;description&amp;quot; : {
                          &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot;,
                          &amp;quot;term_vector&amp;quot;: &amp;quot;with_positions_offsets&amp;quot;
                    },
                    &amp;quot;created_on&amp;quot; : {
                          &amp;quot;type&amp;quot; : &amp;quot;date&amp;quot;,
                          &amp;quot;format&amp;quot; : &amp;quot;yyyy-MM-dd&amp;quot;
                    },
                    &amp;quot;tags&amp;quot; : {
                          &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot;,
                          &amp;quot;index&amp;quot; : &amp;quot;analyzed&amp;quot;,
                          &amp;quot;fields&amp;quot;: {  
                                &amp;quot;verbatim&amp;quot; : {
                                      &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot;,
                                      &amp;quot;index&amp;quot; : &amp;quot;not_analyzed&amp;quot;
                                }
                          }
                    },
                    &amp;quot;members&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; },
                    &amp;quot;location_group&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; }
                  }
            },
            &amp;quot;event&amp;quot; : {
                  &amp;quot;_source&amp;quot; : {
                    &amp;quot;enabled&amp;quot; : true
                  },
                  &amp;quot;_all&amp;quot; : {
                    &amp;quot;enabled&amp;quot; : false
                  },
                  &amp;quot;_parent&amp;quot; : {
                    &amp;quot;type&amp;quot; : &amp;quot;group&amp;quot;
                  },
                  &amp;quot;properties&amp;quot; : {
                    &amp;quot;host&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; },
                    &amp;quot;title&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; },
                    &amp;quot;description&amp;quot; : {
                          &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot;,
                          &amp;quot;term_vector&amp;quot;: &amp;quot;with_positions_offsets&amp;quot;
                    },
                &amp;quot;attendees&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; },
                &amp;quot;date&amp;quot; : {
                    &amp;quot;type&amp;quot; : &amp;quot;date&amp;quot;,
                    &amp;quot;format&amp;quot; : &amp;quot;date_hour_minute&amp;quot;
                },
                &amp;quot;reviews&amp;quot; : {
                    &amp;quot;type&amp;quot; : &amp;quot;integer&amp;quot;,
                    &amp;quot;null_value&amp;quot; : 0
                },
                &amp;quot;location_event&amp;quot;: {
                    &amp;quot;type&amp;quot; : &amp;quot;object&amp;quot;,
                    &amp;quot;properties&amp;quot; : {
                        &amp;quot;name&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot; },
                        &amp;quot;geolocation&amp;quot; : { &amp;quot;type&amp;quot; : &amp;quot;geo_point&amp;quot; }
                    }
                    }
                  }
            }
      }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;也可以通过直接在终端配置mappings&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -XPUT &amp;apos;localhost:9200/get-together/_mapping/new-events&amp;apos; -d &amp;apos;{
    &amp;quot;new-events&amp;quot; : {
        &amp;quot;properties&amp;quot; : {
            &amp;quot;host&amp;quot;: {
                &amp;quot;type&amp;quot; : &amp;quot;string&amp;quot;
            }
        }
    }
}&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果新建的数据库已存在，则会设置失败，先删掉原来的数据库再执行上面的命令。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -s -XDELETE &amp;apos;localhost:9200/get-together &amp;gt; /dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;设置好mapping值后，通过以下命令可以看到所有已建立的数据库及配置生效情况&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl &amp;apos;localhost:9200/_cat/indices?v&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;####文档的新建，更新，删除&lt;/p&gt;
&lt;h6 id=&quot;新建-index&quot;&gt;&lt;a href=&quot;#新建-index&quot; class=&quot;headerlink&quot; title=&quot;新建 index&quot;&gt;&lt;/a&gt;新建 index&lt;/h6&gt;&lt;p&gt;文档的新建和更新可以通过同一个index API,在response中会新增一个_version属性，代表当前的是新建的还是更新的文档。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -XPUT &amp;apos;localhost:9200/index/type/id&amp;apos; -d &amp;apos;{...}&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;上面的方法是会覆盖原来存在的文档，如果我们想要新建一个全新的文档，而不用担心覆盖已存在的文档。我们可以让elasticsearch自动为我们生成ID号，这时我们要使用POST方法(“store this document under this URL”).而不是PUT方法(“store this document at this URL”)。很容易可以看出PUT的url是固定的，而POST的url在type后面还有一个随机值。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -XPOST &amp;apos;localhost:9200/index/type&amp;apos; -d &amp;apos;{...}&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;但是如果我们想要使用自己的ID新建一个全新的文档呢？可以通过以下两种方法实现：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -XPUT &amp;apos;localhost:9200/index/type/id?op_type=create&amp;apos; -d &amp;apos;{...}&amp;apos;
curl -XPUT &amp;apos;localhost:9200/index/type/id/_create&amp;apos; -d &amp;apos;{...}&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;h6 id=&quot;取文档-retrieve&quot;&gt;&lt;a href=&quot;#取文档-retrieve&quot; class=&quot;headerlink&quot; title=&quot;取文档 retrieve&quot;&gt;&lt;/a&gt;取文档 retrieve&lt;/h6&gt;&lt;pre&gt;&lt;code&gt;curl -XGET &amp;apos;localhost:9200/index/type/id?pretty&amp;apos; 
curl -XGET &amp;apos;localhost:9200/index/type/id?_source=title,text 取某文档的特定字段
curl -XGET &amp;apos;localhost:9200/index/type/id/_source 返回的只有字段内容，没有元数据
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;更新-update&quot;&gt;&lt;a href=&quot;#更新-update&quot; class=&quot;headerlink&quot; title=&quot;更新 update&quot;&gt;&lt;/a&gt;更新 update&lt;/h4&gt;&lt;p&gt;除了使用index API &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -XPUT &amp;apos;localhost:9200/index/type/id&amp;apos; -d &amp;apos;{...}&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;还可以使用update API 部分更新文档。通过一次请求完成更新文档所需要的所有操作——取文档，更新文档，重新建立文档，到后来的删除文档（再新建文档时删除，首先只是标记删除）&lt;br&gt;最简单的更新请求就是接受部分文档为doc参数，然后和文档合并，已存在的被覆盖，没有的新增&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -XPOST &amp;apos;localhost:9200/index/type/id/_update&amp;apos; -d &amp;apos;{
    &amp;quot;doc&amp;quot;:{
        &amp;quot;tags&amp;quot;:[&amp;quot;testing&amp;quot;],
        &amp;quot;views&amp;quot;: 0
        }
}&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;删除-delete&quot;&gt;&lt;a href=&quot;#删除-delete&quot; class=&quot;headerlink&quot; title=&quot;删除 delete&quot;&gt;&lt;/a&gt;删除 delete&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;curl -XDELETE &amp;apos;localhost:9200/index/type/id&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;冲突解决&quot;&gt;&lt;a href=&quot;#冲突解决&quot; class=&quot;headerlink&quot; title=&quot;冲突解决&quot;&gt;&lt;/a&gt;冲突解决&lt;/h4&gt;&lt;h4 id=&quot;文档搜索&quot;&gt;&lt;a href=&quot;#文档搜索&quot; class=&quot;headerlink&quot; title=&quot;文档搜索&quot;&gt;&lt;/a&gt;文档搜索&lt;/h4&gt;&lt;h6 id=&quot;搜索请求最基本的几个组件&quot;&gt;&lt;a href=&quot;#搜索请求最基本的几个组件&quot; class=&quot;headerlink&quot; title=&quot;搜索请求最基本的几个组件&quot;&gt;&lt;/a&gt;搜索请求最基本的几个组件&lt;/h6&gt;&lt;p&gt;当你选择对哪个数据库进行搜索的时候，你需要配置几个最基本的组件来决定你需要返回哪些条件的文档以及返回的数量等等。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;query&lt;br&gt;最重要的搜索请求组件，通过query DSL和filter DSL进行配置。&lt;/li&gt;
&lt;li&gt;size&lt;br&gt;返回的满足条件文档的数量&lt;/li&gt;
&lt;li&gt;from&lt;br&gt;和size搭配使用，通常用于分页。从满足条件文档的第几个开始返回。&lt;/li&gt;
&lt;li&gt;_source&lt;br&gt;设置_source字段如何返回。默认情况下是返回全部。注意不要在mappings设置里面disable _source字段&lt;/li&gt;
&lt;li&gt;&lt;p&gt;sort&lt;br&gt;默认情况下返回的文档是按照得分高低进行排序，你可以通过sort设置自己的排序条件&lt;br&gt;完整的一个示例：&lt;/p&gt;
&lt;p&gt; curl ‘localhost:9200/index/type/_search’ -d ‘&lt;br&gt; {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;query&amp;quot;:{
    &amp;quot;match_all&amp;quot;: {}
},
&amp;quot;from&amp;quot;: 0,
&amp;quot;size&amp;quot;: 10,
&amp;quot;_source&amp;quot;: [&amp;quot;name&amp;quot;,&amp;quot;organizer&amp;quot;,&amp;quot;description&amp;quot;],
&amp;quot;sort&amp;quot;: [{&amp;quot;created_on&amp;quot;:&amp;quot;desc&amp;quot;}]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt; }’&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;数据批量导入&quot;&gt;&lt;a href=&quot;#数据批量导入&quot; class=&quot;headerlink&quot; title=&quot;数据批量导入&quot;&gt;&lt;/a&gt;数据批量导入&lt;/h4&gt;&lt;p&gt;通过bulk API可以批量导入新建的文档。格式由两个JSON格式的文档组成，每个文档由空行隔开，各占一行。第一个文档由操作类型如(index，index会覆盖已存在的相同ID的文档，如果不想覆盖则用create操作方法）和元数据组成,如(index,type,ID)；第二个文档则是要index文档的内容。文档代码示例如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{&amp;quot;index&amp;quot;:{&amp;quot;_index&amp;quot;:&amp;quot;get-together&amp;quot;, &amp;quot;_type&amp;quot;:&amp;quot;group&amp;quot;, &amp;quot;_id&amp;quot;:&amp;quot;10&amp;quot;}}
{&amp;quot;name&amp;quot;:&amp;quot;Elasticsearch Bucharest&amp;quot;}
{&amp;quot;index&amp;quot;:{&amp;quot;_index&amp;quot;:&amp;quot;get-together&amp;quot;, &amp;quot;_type&amp;quot;:&amp;quot;group&amp;quot;, &amp;quot;_id&amp;quot;:&amp;quot;11&amp;quot;}}
{&amp;quot;name&amp;quot;:&amp;quot;Big Data Bucharest&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="elasticseach" scheme="http://yoursite.com/tags/elasticseach/"/>
    
  </entry>
  
  <entry>
    <title>R-rvest网页数据爬取</title>
    <link href="http://yoursite.com/2015/08/25/rvest-%E5%9B%BE%E4%B9%A6%E6%89%92%E5%8F%96/"/>
    <id>http://yoursite.com/2015/08/25/rvest-图书扒取/</id>
    <published>2015-08-25T00:06:26.000Z</published>
    <updated>2016-04-22T01:23:22.428Z</updated>
    
    <content type="html">&lt;p&gt;在网页数据爬取过程中，有时候用rvest::read_html()读取网页的内容和我们直接分析页码的源代码不一样，或者直接就是乱码。这两个常见问题可能是由user agent和编码设置错误有关。关于编码的重新设置可以采用以下这种方法：&lt;br&gt;用下载的函数（例如download.file）下载网页下来，然后读取出内容，用stringi扩展包中的&lt;br&gt;stri_enc_detect探测出字符串的编码，然后用string::stri_encode将原编码转换成为UTF8就可以了。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;destfile&amp;lt;-&amp;apos;laocai&amp;apos;
download.file(&amp;apos;http://....&amp;apos;,destfile)
fchar&amp;lt;-readChar(destfile,file.info(destfile)$size,useBytes =TRUE)
stringi::stri_enc_detect(fchar)
fut&amp;lt;-stringi::stri_encode(fchar,from=&amp;apos;GB18030&amp;apos;,to=&amp;quot;UTF8&amp;quot;,to_raw=FALSE)
fhtml &amp;lt;- rvest::read_html(fut)
fhtml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;关于User Agent的设置，因为默认情况下，rvest的User Agent是curl/7.39.0 Rcurl/1.95.4.6 httr/0.6.1，而我们的浏览器User Agent类似于这样Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.118 Safari/537.36，目标页面的HTTP服务器会检查是不是正常的浏览器访问请求。因此需要手动更改User Agent的设置。&lt;br&gt;rvest的read_html()函数的参数可以是三种形式：url,string,httr请求。我们可以通过httr请求设置User Agent.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;read_html(httr::GET(&amp;quot;https://www.baidu.com&amp;quot;,user_agent(&amp;quot;Mozilla/5.0 (X11; Fedora; Linux x86_64; rv:41.0) Gecko/20100101 Firefox/41.0&amp;quot;)))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;更多httr请求的设置可以查阅httr包。我们也可以通过html_session(url,…)来模拟浏览器的对话。通过str()可以看到详细的请求和回应信息。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;session&amp;lt;-html_session(url,...)
str(session)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;下面开始扒取图书网页内容&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;library(rvest)
library(stringr)
url=sapply(1:3,function(i) str_c(&amp;quot;http://it-ebooks.info/book/&amp;quot;,i,&amp;quot;/&amp;quot;))
a=list()
length(a)=15
for(i in 1:3){
    try(at&amp;lt;-read_html(url[i],verbose=T))
    if(length(at %&amp;gt;% html_nodes(&amp;quot;td.justify span&amp;quot;) %&amp;gt;% html_text()) == 0)
        next
    show(i)

    a[[i]]$BookNum &amp;lt;- i

    a[[i]]$BookDescription &amp;lt;- at %&amp;gt;% html_nodes(&amp;quot;td.justify span&amp;quot;) %&amp;gt;% html_text()

    a[[i]]$Publisher &amp;lt;- at %&amp;gt;% html_nodes(&amp;apos;a[itemprop=&amp;quot;publisher&amp;quot;]&amp;apos;) %&amp;gt;% html_text()

    a[[i]]$By &amp;lt;- at %&amp;gt;% html_nodes(&amp;quot;td.justify table tr:nth-child(3) a&amp;quot;) %&amp;gt;% html_text()

    a[[i]]$ISBN&amp;lt;-at %&amp;gt;% html_nodes(&amp;quot;b[itemprop=&amp;apos;isbn&amp;apos;]&amp;quot;) %&amp;gt;% html_text()

    a[[i]]$Year &amp;lt;- at %&amp;gt;% html_nodes(&amp;quot;b[itemprop=&amp;apos;datePublished&amp;apos;]&amp;quot;) %&amp;gt;% html_text()

    a[[i]]$Pages&amp;lt;- at %&amp;gt;% html_nodes(&amp;quot;b[itemprop=&amp;apos;numberOfPages&amp;apos;]&amp;quot;) %&amp;gt;% html_text()

    a[[i]]$imgsrc&amp;lt;- paste(&amp;apos;http://it-ebooks.info&amp;apos;,((at %&amp;gt;% html_nodes(&amp;quot;table.ebook_view img&amp;quot;))[1] %&amp;gt;% html_attr(&amp;quot;src&amp;quot;)),sep=&amp;quot;&amp;quot;)

    a[[i]]$Download&amp;lt;-at %&amp;gt;% html_nodes(&amp;quot;td.justify table tr:nth-child(11) a&amp;quot;) %&amp;gt;% html_attr(&amp;quot;href&amp;quot;)

    a[[i]]$title&amp;lt;- at %&amp;gt;% html_nodes(&amp;quot;h1[itemprop=&amp;apos;name&amp;apos;]&amp;quot;) %&amp;gt;% html_text()
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后保存为json格式&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;library(rjson)
json_book&amp;lt;-toJSON(a)
writeLines(json_book,&amp;apos;mybook.json&amp;apos;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;导出后终端执行如下命令，转换成可以批量导入elasticsearch的格式&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sed -i -e &amp;apos;s/},{/}\n{ &amp;quot;index&amp;quot;: {}}\n{/g&amp;apos; booksys01.json
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;在网页数据爬取过程中，有时候用rvest::read_html()读取网页的内容和我们直接分析页码的源代码不一样，或者直接就是乱码。这两个常见问题可能是由user agent和编码设置错误有关。关于编码的重新设置可以采用以下这种方法：&lt;br&gt;用下载的函数（例如download.file）下载网页下来，然后读取出内容，用stringi扩展包中的&lt;br&gt;stri_enc_detect探测出字符串的编码，然后用string::stri_encode将原编码转换成为UTF8就可以了。&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>R-data.table语法解析（二）</title>
    <link href="http://yoursite.com/2015/08/16/data.table%E8%AF%AD%E6%B3%95%E8%A7%A3%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://yoursite.com/2015/08/16/data.table语法解析（二）/</id>
    <published>2015-08-16T04:54:26.000Z</published>
    <updated>2016-04-22T04:58:38.696Z</updated>
    
    <content type="html">&lt;pre&gt;&lt;code&gt;library(data.table)
DT = data.table(a=LETTERS[c(1,1:3)],b=4:7,key=&amp;quot;a&amp;quot;)
DT
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;:= 通过引用的方式增加或者更新列&lt;br&gt;类似transform方法，但是更容易操作&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT &amp;lt;- data.table(a=rep(1:3, each=2), b=1:6)
DT2 &amp;lt;- transform(DT, c = a^2)
DT[, c:=a^2]
identical(DT,DT2)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;c&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;TRUE&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT2 &amp;lt;- within(DT, {
b &amp;lt;- rev(b)
c &amp;lt;- a*2
rm(a)
})
DT[,`:=`(b = rev(b),
c = a*2,
a = NULL)]
identical(DT,DT2)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;c&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;TRUE&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT[,c:=8]
DT[,d:=9L]
DT[,c:=NULL]
DT[2,d:=10L]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;c&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;c&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[b&amp;gt;4,b:=d*2L]
DT[&amp;quot;A&amp;quot;,b:=0L]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[,e:=mean(d),by=a]
DT[&amp;quot;B&amp;quot;,f:=mean(d)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;e&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;9.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;e&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;f&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9.5&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;A&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;9.5&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;B&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;between 选择符合范围判断的项&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT = data.table(a=1:5, b=6:10)
DT[b %between% c(7,9)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;b&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;chmatch 快速匹配两个字符向量，返回一个匹配成功位置的向量&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;a&amp;lt;-LETTERS[c(1:5)]
b&amp;lt;-LETTERS[c(4:10)]
chmatch(a,b) 
a %chin% b
&lt;/code&gt;&lt;/pre&gt;&lt;ol class=&quot;list-inline&quot;&gt;&lt;br&gt;    &lt;li&gt;NA&lt;/li&gt;&lt;br&gt;    &lt;li&gt;NA&lt;/li&gt;&lt;br&gt;    &lt;li&gt;NA&lt;/li&gt;&lt;br&gt;    &lt;li&gt;1&lt;/li&gt;&lt;br&gt;    &lt;li&gt;2&lt;/li&gt;&lt;br&gt;&lt;/ol&gt;

&lt;ol class=&quot;list-inline&quot;&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;&lt;/ol&gt;

&lt;p&gt;dcast.data.table 数据表的整形&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;melt.data.table用法

require(reshape2)
require(data.table)
DT &amp;lt;- data.table(
           i1 = c(1:5, NA), 
           i2 = c(NA,6,7,8,9,10), 
           f1 = factor(sample(c(letters[1:3], NA), 6, TRUE)), 
           c1 = sample(c(letters[1:3], NA), 6, TRUE), 
           d1 = as.Date(c(1:3,NA,4:5), origin=&amp;quot;2013-09-01&amp;quot;), 
           d2 = as.Date(6:1, origin=&amp;quot;2012-01-01&amp;quot;))
DT[, l1 := DT[, list(c=list(rep(i1, sample(5,1)))), by = i1]$c] # list cols
DT[, l2 := DT[, list(c=list(rep(c1, sample(5,1)))), by = i1]$c]

melt(DT, id=1:2, measure=3) 
melt(DT, id=c(&amp;quot;i1&amp;quot;, &amp;quot;i2&amp;quot;), measure=&amp;quot;f1&amp;quot;, value.factor=TRUE) # same as above, but value is factor

melt(DT, id=c(&amp;quot;i1&amp;quot;, &amp;quot;f1&amp;quot;), measure=c(&amp;quot;d1&amp;quot;, &amp;quot;d2&amp;quot;)) # date class attribute lost
melt(DT, id=c(&amp;quot;i1&amp;quot;, &amp;quot;f1&amp;quot;), measure=c(&amp;quot;c1&amp;quot;, &amp;quot;d1&amp;quot;)) # value is char, date attribute lost


melt(DT, id=1, measure=c(&amp;quot;l1&amp;quot;, &amp;quot;l2&amp;quot;)) # value is a list
melt(DT, id=1, measure=c(&amp;quot;c1&amp;quot;, &amp;quot;l1&amp;quot;)) # c1 coerced to list


     melt(DT, id=1, measure=c(&amp;quot;c1&amp;quot;, &amp;quot;f1&amp;quot;)) # value is char
     melt(DT, id=1, measure=c(&amp;quot;c1&amp;quot;, &amp;quot;i2&amp;quot;)) # i2 coerced to char


     melt(DT, id=1, measure=c(&amp;quot;c1&amp;quot;, &amp;quot;i2&amp;quot;), na.rm=TRUE) # remove NA



Loading required package: reshape2
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;f1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;c1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;l1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;2013-09-02&lt;/td&gt;&lt;td&gt;2012-01-07&lt;/td&gt;&lt;td&gt;1,1,1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;2013-09-03&lt;/td&gt;&lt;td&gt;2012-01-06&lt;/td&gt;&lt;td&gt;2,2,2,2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;2013-09-04&lt;/td&gt;&lt;td&gt;2012-01-05&lt;/td&gt;&lt;td&gt;3,3,3,3,3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;2012-01-04&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;2013-09-05&lt;/td&gt;&lt;td&gt;2012-01-03&lt;/td&gt;&lt;td&gt;5,5,5,5,5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;2013-09-06&lt;/td&gt;&lt;td&gt;2012-01-02&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;f1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;c1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;d2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;l1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;l2&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;2013-09-02&lt;/td&gt;&lt;td&gt;2012-01-07&lt;/td&gt;&lt;td&gt;1,1,1&lt;/td&gt;&lt;td&gt;a,a,a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;2013-09-03&lt;/td&gt;&lt;td&gt;2012-01-06&lt;/td&gt;&lt;td&gt;2,2,2,2&lt;/td&gt;&lt;td&gt;b,b,b,b,b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;2013-09-04&lt;/td&gt;&lt;td&gt;2012-01-05&lt;/td&gt;&lt;td&gt;3,3,3,3,3&lt;/td&gt;&lt;td&gt;a,a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;2012-01-04&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;2013-09-05&lt;/td&gt;&lt;td&gt;2012-01-03&lt;/td&gt;&lt;td&gt;5,5,5,5,5&lt;/td&gt;&lt;td&gt;b,b,b,b,b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;2013-09-06&lt;/td&gt;&lt;td&gt;2012-01-02&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;a,a,a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;f1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15950&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15951&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15952&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15953&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15954&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d2&lt;/td&gt;&lt;td&gt;15346&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;d2&lt;/td&gt;&lt;td&gt;15345&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d2&lt;/td&gt;&lt;td&gt;15344&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;d2&lt;/td&gt;&lt;td&gt;15343&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;d2&lt;/td&gt;&lt;td&gt;15342&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d2&lt;/td&gt;&lt;td&gt;15341&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;Warning message:
In melt.data.table(DT, id = c(&amp;quot;i1&amp;quot;, &amp;quot;f1&amp;quot;), measure = c(&amp;quot;c1&amp;quot;, &amp;quot;d1&amp;quot;)): All &amp;apos;measure.vars are NOT of the SAME type. By order of hierarchy, the molten data value column will be of type &amp;apos;character&amp;apos;. Therefore all measure variables that are not of type &amp;apos;character&amp;apos; will be coerced to. Check the DETAILS section of ?melt.data.table for more on coercion.
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;f1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15950&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15951&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15952&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15953&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;d1&lt;/td&gt;&lt;td&gt;15954&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;1,1,1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;2,2,2,2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;3,3,3,3,3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;5,5,5,5,5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;l2&lt;/td&gt;&lt;td&gt;a,a,a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;l2&lt;/td&gt;&lt;td&gt;b,b,b,b,b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;l2&lt;/td&gt;&lt;td&gt;a,a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;l2&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;l2&lt;/td&gt;&lt;td&gt;b,b,b,b,b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;l2&lt;/td&gt;&lt;td&gt;a,a,a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;Warning message:
In melt.data.table(DT, id = 1, measure = c(&amp;quot;c1&amp;quot;, &amp;quot;l1&amp;quot;)): All &amp;apos;measure.vars are NOT of the SAME type. By order of hierarchy, the molten data value column will be of type &amp;apos;list&amp;apos;. Therefore all measure variables that are not of type &amp;apos;list&amp;apos; will be coerced to. Check the DETAILS section of ?melt.data.table for more on coercion.
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;1,1,1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;2,2,2,2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;3,3,3,3,3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;5,5,5,5,5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;l1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;f1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;Warning message:
In melt.data.table(DT, id = 1, measure = c(&amp;quot;c1&amp;quot;, &amp;quot;i2&amp;quot;)): All &amp;apos;measure.vars are NOT of the SAME type. By order of hierarchy, the molten data value column will be of type &amp;apos;character&amp;apos;. Therefore all measure variables that are not of type &amp;apos;character&amp;apos; will be coerced to. Check the DETAILS section of ?melt.data.table for more on coercion.
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;Warning message:
In melt.data.table(DT, id = 1, measure = c(&amp;quot;c1&amp;quot;, &amp;quot;i2&amp;quot;), na.rm = TRUE): All &amp;apos;measure.vars are NOT of the SAME type. By order of hierarchy, the molten data value column will be of type &amp;apos;character&amp;apos;. Therefore all measure variables that are not of type &amp;apos;character&amp;apos; will be coerced to. Check the DETAILS section of ?melt.data.table for more on coercion.
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;i1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;c1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;i2&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;melt后，进行cast&lt;br&gt;reshape2的精髓是把整体数据（比如数据框）打碎（melt，或说熔化），让其回到一个一个数据点的状态，不过，这个数据点是可以根据观测的id名称和变量名称定位找到的（事实上，数据框是二维的，在数据框中，根据观测id和某变量名称，即可交叉定位到某数据点）。然后，再根据观测id和变量名称的组合，随心所欲的锻造需要的数据形态（cast），中间可能有求和、求平均值之类的数据运算。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;names(ChickWeight) &amp;lt;- tolower(names(ChickWeight))
DT &amp;lt;- melt(as.data.table(ChickWeight), id=2:4)
dcast(DT, time ~ variable, fun=mean)
dcast(DT, diet ~ variable, fun=mean)
dcast(DT, diet+chick ~ time, drop=FALSE)
dcast(DT, diet+chick ~ time, drop=FALSE, fill=0)
dcast.data.table(DT, chick ~ time, fun=mean, subset=.(time &amp;lt; 10 &amp;amp; chick &amp;lt; 20))
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;time&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;weight&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;41.06&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;49.22&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;59.95918&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;74.30612&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;91.2449&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;107.8367&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;12&lt;/td&gt;&lt;td&gt;129.2449&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;14&lt;/td&gt;&lt;td&gt;143.8125&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;168.0851&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;190.1915&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;209.7174&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;21&lt;/td&gt;&lt;td&gt;218.6889&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;diet&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;weight&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;102.6455&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;122.6167&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;142.95&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;135.2627&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;Warning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generatedWarning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generatedWarning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generatedWarning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generated
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;diet&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;chick&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;0&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;4&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;6&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;8&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;10&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;12&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;14&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;16&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;18&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;20&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;21&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;35&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;45&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;57&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;54&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;13&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;60&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;70&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;81&lt;/td&gt;&lt;td&gt;91&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;85&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;td&gt;90&lt;/td&gt;&lt;td&gt;92&lt;/td&gt;&lt;td&gt;93&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;47&lt;/td&gt;&lt;td&gt;54&lt;/td&gt;&lt;td&gt;58&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;73&lt;/td&gt;&lt;td&gt;77&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;td&gt;107&lt;/td&gt;&lt;td&gt;115&lt;/td&gt;&lt;td&gt;117&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;44&lt;/td&gt;&lt;td&gt;52&lt;/td&gt;&lt;td&gt;63&lt;/td&gt;&lt;td&gt;74&lt;/td&gt;&lt;td&gt;81&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;td&gt;101&lt;/td&gt;&lt;td&gt;112&lt;/td&gt;&lt;td&gt;120&lt;/td&gt;&lt;td&gt;124&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;61&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;93&lt;/td&gt;&lt;td&gt;110&lt;/td&gt;&lt;td&gt;116&lt;/td&gt;&lt;td&gt;126&lt;/td&gt;&lt;td&gt;134&lt;/td&gt;&lt;td&gt;125&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;17&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;61&lt;/td&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;83&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;113&lt;/td&gt;&lt;td&gt;123&lt;/td&gt;&lt;td&gt;133&lt;/td&gt;&lt;td&gt;142&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;19&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;82&lt;/td&gt;&lt;td&gt;88&lt;/td&gt;&lt;td&gt;106&lt;/td&gt;&lt;td&gt;120&lt;/td&gt;&lt;td&gt;144&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;74&lt;/td&gt;&lt;td&gt;87&lt;/td&gt;&lt;td&gt;102&lt;/td&gt;&lt;td&gt;108&lt;/td&gt;&lt;td&gt;136&lt;/td&gt;&lt;td&gt;154&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;74&lt;/td&gt;&lt;td&gt;97&lt;/td&gt;&lt;td&gt;124&lt;/td&gt;&lt;td&gt;141&lt;/td&gt;&lt;td&gt;148&lt;/td&gt;&lt;td&gt;155&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;13&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;11&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;63&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;112&lt;/td&gt;&lt;td&gt;139&lt;/td&gt;&lt;td&gt;168&lt;/td&gt;&lt;td&gt;177&lt;/td&gt;&lt;td&gt;182&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;181&lt;/td&gt;&lt;td&gt;175&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;14&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;99&lt;/td&gt;&lt;td&gt;115&lt;/td&gt;&lt;td&gt;138&lt;/td&gt;&lt;td&gt;163&lt;/td&gt;&lt;td&gt;187&lt;/td&gt;&lt;td&gt;198&lt;/td&gt;&lt;td&gt;202&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;15&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;76&lt;/td&gt;&lt;td&gt;93&lt;/td&gt;&lt;td&gt;106&lt;/td&gt;&lt;td&gt;125&lt;/td&gt;&lt;td&gt;149&lt;/td&gt;&lt;td&gt;171&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;16&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;12&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;88&lt;/td&gt;&lt;td&gt;119&lt;/td&gt;&lt;td&gt;135&lt;/td&gt;&lt;td&gt;162&lt;/td&gt;&lt;td&gt;185&lt;/td&gt;&lt;td&gt;195&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;17&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;58&lt;/td&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;122&lt;/td&gt;&lt;td&gt;138&lt;/td&gt;&lt;td&gt;162&lt;/td&gt;&lt;td&gt;187&lt;/td&gt;&lt;td&gt;209&lt;/td&gt;&lt;td&gt;215&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;18&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;60&lt;/td&gt;&lt;td&gt;79&lt;/td&gt;&lt;td&gt;106&lt;/td&gt;&lt;td&gt;141&lt;/td&gt;&lt;td&gt;164&lt;/td&gt;&lt;td&gt;197&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;220&lt;/td&gt;&lt;td&gt;223&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;19&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;14&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;79&lt;/td&gt;&lt;td&gt;101&lt;/td&gt;&lt;td&gt;128&lt;/td&gt;&lt;td&gt;164&lt;/td&gt;&lt;td&gt;192&lt;/td&gt;&lt;td&gt;227&lt;/td&gt;&lt;td&gt;248&lt;/td&gt;&lt;td&gt;259&lt;/td&gt;&lt;td&gt;266&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;20&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;57&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;112&lt;/td&gt;&lt;td&gt;146&lt;/td&gt;&lt;td&gt;174&lt;/td&gt;&lt;td&gt;218&lt;/td&gt;&lt;td&gt;250&lt;/td&gt;&lt;td&gt;288&lt;/td&gt;&lt;td&gt;305&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;21&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;22&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;23&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;22&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;24&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;25&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;27&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;26&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;28&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;27&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;26&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;28&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;29&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;30&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;21&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;31&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;171&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;172&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;173&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;22&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;174&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;175&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;27&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;176&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;28&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;177&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;26&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;178&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;179&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;180&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;21&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;181&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;33&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;182&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;37&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;183&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;36&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;184&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;31&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;185&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;186&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;38&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;187&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;32&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;188&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;189&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;34&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;190&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;35&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;191&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;44&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;86&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;118&lt;/td&gt;&lt;td&gt;127&lt;/td&gt;&lt;td&gt;138&lt;/td&gt;&lt;td&gt;145&lt;/td&gt;&lt;td&gt;146&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;192&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;45&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;61&lt;/td&gt;&lt;td&gt;78&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;td&gt;117&lt;/td&gt;&lt;td&gt;135&lt;/td&gt;&lt;td&gt;141&lt;/td&gt;&lt;td&gt;147&lt;/td&gt;&lt;td&gt;174&lt;/td&gt;&lt;td&gt;197&lt;/td&gt;&lt;td&gt;196&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;193&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;69&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;td&gt;131&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;188&lt;/td&gt;&lt;td&gt;197&lt;/td&gt;&lt;td&gt;198&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;200&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;194&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;66&lt;/td&gt;&lt;td&gt;85&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;124&lt;/td&gt;&lt;td&gt;155&lt;/td&gt;&lt;td&gt;153&lt;/td&gt;&lt;td&gt;175&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;204&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;195&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;47&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;66&lt;/td&gt;&lt;td&gt;79&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;123&lt;/td&gt;&lt;td&gt;148&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;td&gt;168&lt;/td&gt;&lt;td&gt;185&lt;/td&gt;&lt;td&gt;210&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;196&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;85&lt;/td&gt;&lt;td&gt;108&lt;/td&gt;&lt;td&gt;128&lt;/td&gt;&lt;td&gt;152&lt;/td&gt;&lt;td&gt;166&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;203&lt;/td&gt;&lt;td&gt;233&lt;/td&gt;&lt;td&gt;237&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;197&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;46&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;52&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;82&lt;/td&gt;&lt;td&gt;101&lt;/td&gt;&lt;td&gt;120&lt;/td&gt;&lt;td&gt;144&lt;/td&gt;&lt;td&gt;156&lt;/td&gt;&lt;td&gt;173&lt;/td&gt;&lt;td&gt;210&lt;/td&gt;&lt;td&gt;231&lt;/td&gt;&lt;td&gt;238&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;198&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;54&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;105&lt;/td&gt;&lt;td&gt;122&lt;/td&gt;&lt;td&gt;155&lt;/td&gt;&lt;td&gt;175&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;td&gt;234&lt;/td&gt;&lt;td&gt;264&lt;/td&gt;&lt;td&gt;264&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;199&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;63&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;126&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;174&lt;/td&gt;&lt;td&gt;204&lt;/td&gt;&lt;td&gt;234&lt;/td&gt;&lt;td&gt;269&lt;/td&gt;&lt;td&gt;281&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;200&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;80&lt;/td&gt;&lt;td&gt;104&lt;/td&gt;&lt;td&gt;125&lt;/td&gt;&lt;td&gt;154&lt;/td&gt;&lt;td&gt;170&lt;/td&gt;&lt;td&gt;222&lt;/td&gt;&lt;td&gt;261&lt;/td&gt;&lt;td&gt;303&lt;/td&gt;&lt;td&gt;322&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;Warning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generatedWarning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generatedWarning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generatedWarning message:
In `[&amp;lt;-.factor`(`*tmp*`, ri, value = &amp;quot;⋮&amp;quot;): invalid factor level, NA generated
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;diet&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;chick&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;0&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;4&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;6&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;8&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;10&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;12&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;14&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;16&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;18&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;20&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;21&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;35&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;45&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;57&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;54&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;13&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;60&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;70&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;81&lt;/td&gt;&lt;td&gt;91&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;85&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;td&gt;90&lt;/td&gt;&lt;td&gt;92&lt;/td&gt;&lt;td&gt;93&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;47&lt;/td&gt;&lt;td&gt;54&lt;/td&gt;&lt;td&gt;58&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;73&lt;/td&gt;&lt;td&gt;77&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;td&gt;107&lt;/td&gt;&lt;td&gt;115&lt;/td&gt;&lt;td&gt;117&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;44&lt;/td&gt;&lt;td&gt;52&lt;/td&gt;&lt;td&gt;63&lt;/td&gt;&lt;td&gt;74&lt;/td&gt;&lt;td&gt;81&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;td&gt;101&lt;/td&gt;&lt;td&gt;112&lt;/td&gt;&lt;td&gt;120&lt;/td&gt;&lt;td&gt;124&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;61&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;93&lt;/td&gt;&lt;td&gt;110&lt;/td&gt;&lt;td&gt;116&lt;/td&gt;&lt;td&gt;126&lt;/td&gt;&lt;td&gt;134&lt;/td&gt;&lt;td&gt;125&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;17&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;61&lt;/td&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;83&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;113&lt;/td&gt;&lt;td&gt;123&lt;/td&gt;&lt;td&gt;133&lt;/td&gt;&lt;td&gt;142&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;19&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;82&lt;/td&gt;&lt;td&gt;88&lt;/td&gt;&lt;td&gt;106&lt;/td&gt;&lt;td&gt;120&lt;/td&gt;&lt;td&gt;144&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;74&lt;/td&gt;&lt;td&gt;87&lt;/td&gt;&lt;td&gt;102&lt;/td&gt;&lt;td&gt;108&lt;/td&gt;&lt;td&gt;136&lt;/td&gt;&lt;td&gt;154&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;74&lt;/td&gt;&lt;td&gt;97&lt;/td&gt;&lt;td&gt;124&lt;/td&gt;&lt;td&gt;141&lt;/td&gt;&lt;td&gt;148&lt;/td&gt;&lt;td&gt;155&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;13&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;11&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;63&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;112&lt;/td&gt;&lt;td&gt;139&lt;/td&gt;&lt;td&gt;168&lt;/td&gt;&lt;td&gt;177&lt;/td&gt;&lt;td&gt;182&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;181&lt;/td&gt;&lt;td&gt;175&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;14&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;99&lt;/td&gt;&lt;td&gt;115&lt;/td&gt;&lt;td&gt;138&lt;/td&gt;&lt;td&gt;163&lt;/td&gt;&lt;td&gt;187&lt;/td&gt;&lt;td&gt;198&lt;/td&gt;&lt;td&gt;202&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;15&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;76&lt;/td&gt;&lt;td&gt;93&lt;/td&gt;&lt;td&gt;106&lt;/td&gt;&lt;td&gt;125&lt;/td&gt;&lt;td&gt;149&lt;/td&gt;&lt;td&gt;171&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;16&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;12&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;88&lt;/td&gt;&lt;td&gt;119&lt;/td&gt;&lt;td&gt;135&lt;/td&gt;&lt;td&gt;162&lt;/td&gt;&lt;td&gt;185&lt;/td&gt;&lt;td&gt;195&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;17&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;58&lt;/td&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;122&lt;/td&gt;&lt;td&gt;138&lt;/td&gt;&lt;td&gt;162&lt;/td&gt;&lt;td&gt;187&lt;/td&gt;&lt;td&gt;209&lt;/td&gt;&lt;td&gt;215&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;18&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;60&lt;/td&gt;&lt;td&gt;79&lt;/td&gt;&lt;td&gt;106&lt;/td&gt;&lt;td&gt;141&lt;/td&gt;&lt;td&gt;164&lt;/td&gt;&lt;td&gt;197&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;220&lt;/td&gt;&lt;td&gt;223&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;19&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;14&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;79&lt;/td&gt;&lt;td&gt;101&lt;/td&gt;&lt;td&gt;128&lt;/td&gt;&lt;td&gt;164&lt;/td&gt;&lt;td&gt;192&lt;/td&gt;&lt;td&gt;227&lt;/td&gt;&lt;td&gt;248&lt;/td&gt;&lt;td&gt;259&lt;/td&gt;&lt;td&gt;266&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;20&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;57&lt;/td&gt;&lt;td&gt;71&lt;/td&gt;&lt;td&gt;89&lt;/td&gt;&lt;td&gt;112&lt;/td&gt;&lt;td&gt;146&lt;/td&gt;&lt;td&gt;174&lt;/td&gt;&lt;td&gt;218&lt;/td&gt;&lt;td&gt;250&lt;/td&gt;&lt;td&gt;288&lt;/td&gt;&lt;td&gt;305&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;21&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;22&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;23&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;22&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;24&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;25&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;27&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;26&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;28&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;27&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;26&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;28&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;29&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;30&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;21&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;31&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;td&gt;⋮&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;171&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;172&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;173&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;22&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;174&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;175&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;27&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;176&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;28&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;177&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;26&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;178&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;179&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;180&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;21&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;181&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;33&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;182&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;37&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;183&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;36&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;184&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;31&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;185&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;186&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;38&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;187&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;32&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;188&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;189&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;34&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;190&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;35&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;191&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;44&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;td&gt;86&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;118&lt;/td&gt;&lt;td&gt;127&lt;/td&gt;&lt;td&gt;138&lt;/td&gt;&lt;td&gt;145&lt;/td&gt;&lt;td&gt;146&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;192&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;45&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;61&lt;/td&gt;&lt;td&gt;78&lt;/td&gt;&lt;td&gt;98&lt;/td&gt;&lt;td&gt;117&lt;/td&gt;&lt;td&gt;135&lt;/td&gt;&lt;td&gt;141&lt;/td&gt;&lt;td&gt;147&lt;/td&gt;&lt;td&gt;174&lt;/td&gt;&lt;td&gt;197&lt;/td&gt;&lt;td&gt;196&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;193&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;43&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;69&lt;/td&gt;&lt;td&gt;96&lt;/td&gt;&lt;td&gt;131&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;188&lt;/td&gt;&lt;td&gt;197&lt;/td&gt;&lt;td&gt;198&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;200&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;194&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;66&lt;/td&gt;&lt;td&gt;85&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;124&lt;/td&gt;&lt;td&gt;155&lt;/td&gt;&lt;td&gt;153&lt;/td&gt;&lt;td&gt;175&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;199&lt;/td&gt;&lt;td&gt;204&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;195&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;47&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;66&lt;/td&gt;&lt;td&gt;79&lt;/td&gt;&lt;td&gt;100&lt;/td&gt;&lt;td&gt;123&lt;/td&gt;&lt;td&gt;148&lt;/td&gt;&lt;td&gt;157&lt;/td&gt;&lt;td&gt;168&lt;/td&gt;&lt;td&gt;185&lt;/td&gt;&lt;td&gt;210&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;196&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;85&lt;/td&gt;&lt;td&gt;108&lt;/td&gt;&lt;td&gt;128&lt;/td&gt;&lt;td&gt;152&lt;/td&gt;&lt;td&gt;166&lt;/td&gt;&lt;td&gt;184&lt;/td&gt;&lt;td&gt;203&lt;/td&gt;&lt;td&gt;233&lt;/td&gt;&lt;td&gt;237&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;197&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;46&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;52&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;82&lt;/td&gt;&lt;td&gt;101&lt;/td&gt;&lt;td&gt;120&lt;/td&gt;&lt;td&gt;144&lt;/td&gt;&lt;td&gt;156&lt;/td&gt;&lt;td&gt;173&lt;/td&gt;&lt;td&gt;210&lt;/td&gt;&lt;td&gt;231&lt;/td&gt;&lt;td&gt;238&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;198&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;54&lt;/td&gt;&lt;td&gt;67&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;105&lt;/td&gt;&lt;td&gt;122&lt;/td&gt;&lt;td&gt;155&lt;/td&gt;&lt;td&gt;175&lt;/td&gt;&lt;td&gt;205&lt;/td&gt;&lt;td&gt;234&lt;/td&gt;&lt;td&gt;264&lt;/td&gt;&lt;td&gt;264&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;199&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;63&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;103&lt;/td&gt;&lt;td&gt;126&lt;/td&gt;&lt;td&gt;160&lt;/td&gt;&lt;td&gt;174&lt;/td&gt;&lt;td&gt;204&lt;/td&gt;&lt;td&gt;234&lt;/td&gt;&lt;td&gt;269&lt;/td&gt;&lt;td&gt;281&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;200&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;62&lt;/td&gt;&lt;td&gt;80&lt;/td&gt;&lt;td&gt;104&lt;/td&gt;&lt;td&gt;125&lt;/td&gt;&lt;td&gt;154&lt;/td&gt;&lt;td&gt;170&lt;/td&gt;&lt;td&gt;222&lt;/td&gt;&lt;td&gt;261&lt;/td&gt;&lt;td&gt;303&lt;/td&gt;&lt;td&gt;322&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;chick&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;0&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;4&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;6&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;8&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;18&lt;/td&gt;&lt;td&gt;39&lt;/td&gt;&lt;td&gt;35&lt;/td&gt;&lt;td&gt;NaN&lt;/td&gt;&lt;td&gt;NaN&lt;/td&gt;&lt;td&gt;NaN&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;45&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;57&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;56&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;13&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;53&lt;/td&gt;&lt;td&gt;60&lt;/td&gt;&lt;td&gt;65&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;59&lt;/td&gt;&lt;td&gt;68&lt;/td&gt;&lt;td&gt;85&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;duplicated 根据键值判断当前行是否与之前的有重复&lt;br&gt;unique 返回去掉重复后的值&lt;br&gt;anyDuplicated 返回第一个重复值的index i 没有就为0&lt;br&gt;uniqueN 相等于length(unique(x))&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT &amp;lt;- data.table(A = rep(1:3, each=4), B = rep(1:4, each=3), C = rep(1:2, 6), key = &amp;quot;A,B&amp;quot;)
DT
duplicated(DT)
unique(DT)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;ol class=&quot;list-inline&quot;&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;&lt;/ol&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT &amp;lt;- data.table(A = rep(1:3, each=4), B = rep(1:4, each=3), C = rep(1:2, 6), key = &amp;quot;A,B&amp;quot;)
DT
duplicated(DT, by=&amp;quot;B&amp;quot;, fromLast=TRUE)
unique(DT, by=&amp;quot;B&amp;quot;, fromLast=TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;ol class=&quot;list-inline&quot;&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;TRUE&lt;/li&gt;&lt;br&gt;    &lt;li&gt;FALSE&lt;/li&gt;&lt;br&gt;&lt;/ol&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;anyDuplicated(DT, by=c(&amp;quot;A&amp;quot;, &amp;quot;B&amp;quot;))
any(duplicated(DT, by=c(&amp;quot;A&amp;quot;, &amp;quot;B&amp;quot;)))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2&lt;/p&gt;
&lt;p&gt;TRUE&lt;/p&gt;
&lt;p&gt;x[i, j, by, keyby, with = TRUE…..]&lt;br&gt;根据语法，当数据表的i为data.table时，x必须设置key值，i和x连接&lt;br&gt;DT[J(…)]就是一种更可读的方法，通过创造一个data.table作为i传入，与DT连接&lt;br&gt;x[data.table(id)]与x[J(id)]等同 也可以直接写成x[id],结果等与subset(x, key == id)&lt;br&gt;x[list(id)]与x[.(id)]等同&lt;br&gt;DT[“b”]&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT = data.table(A=5:1,B=letters[5:1])
DT
setkey(DT,B)
DT[J(&amp;quot;b&amp;quot;)]
CJ(c(5,NA,1), c(1,3,2))
CJ(c(5,NA,1), c(1,3,2), sorted=FALSE)
x = c(1,1,2)
y = c(4,6,4)
CJ(x, y, unique=TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;e&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V2&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V2&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;unique&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;TRUE&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;like 通过正则表达式匹配&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT = data.table(Name=c(&amp;quot;Mary&amp;quot;,&amp;quot;George&amp;quot;,&amp;quot;Martha&amp;quot;), Salary=c(2,3,4))
DT
DT[Name %like% &amp;quot;^Mar&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Name&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Salary&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;Mary&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;George&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;Martha&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Name&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Salary&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;Mary&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;Martha&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;merge 合并 data.table的merge方法和data.frame的merge方法，由一个区别就是，在默认情况下，data.table通过共同的key进行合并，而data.frame则是通过共同的列名&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dt1 &amp;lt;- data.table(A = letters[1:10], X = 1:10, key = &amp;quot;A&amp;quot;)
dt2 &amp;lt;- data.table(A = letters[5:14], Y = 1:10, key = &amp;quot;A&amp;quot;)
merge(dt1, dt2)
merge(dt1, dt2, all = TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;X&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Y&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;e&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;f&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;g&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;h&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;i&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;j&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;X&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Y&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;d&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;e&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;f&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;g&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;h&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;i&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;j&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;k&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;l&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;13&lt;/th&gt;&lt;td&gt;m&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;14&lt;/th&gt;&lt;td&gt;n&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;dt1 &amp;lt;- data.table(A = letters[rep(1:3, 2)], X = 1:6, key = &amp;quot;A&amp;quot;)
dt2 &amp;lt;- data.table(A = letters[rep(2:4, 2)], Y = 6:1, key = &amp;quot;A&amp;quot;)
merge(dt1, dt2, allow.cartesian=TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;X&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;Y&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;na.omit.data.table 根据指定的列去掉行值为空值的行&lt;br&gt;na.omit(object, cols=seq_along(object), invert=FALSE, …)&lt;/p&gt;
&lt;p&gt;DT = data.table(x=c(1,NaN,NA,3), y=c(NA&lt;em&gt;integer&lt;/em&gt;, 1:3), z=c(“a”, NA&lt;em&gt;character&lt;/em&gt;, “b”, “c”))&lt;br&gt;/&lt;em&gt; default behaviour &lt;/em&gt;/&lt;br&gt;na.omit(DT)&lt;br&gt;/&lt;em&gt; omit rows where ‘x’ has a missing value&lt;/em&gt;/&lt;br&gt;na.omit(DT, cols=”x”)&lt;br&gt;/&lt;em&gt; omit rows where either ‘x’ or ‘y’ have missing values&lt;/em&gt;/&lt;br&gt;na.omit(DT, cols=c(“x”, “y”))&lt;/p&gt;
&lt;p&gt;rbindlist 对一列表的data.table进行行合并，组成一个data.table&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT1 = data.table(A=1:3,B=letters[1:3])
DT2 = data.table(A=4:5,B=letters[4:5])
l = list(DT1,DT2)
rbindlist(l)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;e&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT1 = data.table(A=1:3,B=letters[1:3])
DT2 = data.table(B=letters[4:5],A=4:5)
l = list(DT1,DT2)
rbindlist(l, use.names=TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;e&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT1 = data.table(A=1:3,B=letters[1:3])
DT2 = data.table(B=letters[4:5],C=factor(1:2))
l = list(DT1,DT2)
rbindlist(l, use.names=TRUE, fill=TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;d&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;e&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;setattr(x,name,value)&lt;br&gt;setnames(x,old,new)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT = data.table(a=1:2,b=3:4,c=5:6)
setnames(DT,&amp;quot;b&amp;quot;,&amp;quot;B&amp;quot;)
setnames(DT,3,&amp;quot;C&amp;quot;)
DT
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;setcolorder(x, neworder) 对列名进行指定的排序&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT = data.table(A=sample(3, 10, TRUE),B=sample(letters[1:3], 10, TRUE), C=sample(10))
setcolorder(DT, c(&amp;quot;C&amp;quot;, &amp;quot;A&amp;quot;, &amp;quot;B&amp;quot;))
DT
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;setorder 对行进行排序&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT = data.table(A=sample(3, 10, TRUE),B=sample(letters[1:3], 10, TRUE), C=sample(10))
setorder(DT, A, -B)
setorderv(DT, c(&amp;quot;A&amp;quot;, &amp;quot;B&amp;quot;), c(1, -1))
DT
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;A&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;B&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;C&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;setDF 通过引用的方式把数据表变成数据框&lt;br&gt;setDT 通过引用的方式把数据框变成数据表&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;X = data.table(x=1:5, y=6:10)
setDF(X)[]
A = list(a=1:5, a=6:10)
setDT(A)[]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;tables 列出所有class为data.table的对象&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tables()

     NAME NROW NCOL MB COLS  KEY
[1,] A       5    2  1 a,a      
[2,] DT     10    3  1 A,B,C    
[3,] dt1     6    2  1 A,X   A  
[4,] DT1     3    2  1 A,B      
[5,] dt2     6    2  1 A,Y   A  
[6,] DT2     2    2  1 B,C      
Total: 6MB
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;pre&gt;&lt;code&gt;library(data.table)
DT = data.table(a=LETTERS[c(1,1:3)],b=4:7,key=&amp;quot;a&amp;quot;)
DT
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>R-data.table语法解析（一）</title>
    <link href="http://yoursite.com/2015/08/15/data.table%E8%AF%AD%E6%B3%95%E8%A7%A3%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://yoursite.com/2015/08/15/data.table语法解析（一）/</id>
    <published>2015-08-15T04:54:26.000Z</published>
    <updated>2016-04-21T23:38:30.148Z</updated>
    
    <content type="html">&lt;p&gt;R-data.table&lt;/p&gt;
&lt;p&gt;上一节介绍了最基本的如何操作data.frame的行列来实现各种功能需求的数据计算。这一节将介绍另外一个功能更加强大的R包:data.table&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;library(data.table)
DT = data.table(x=rep(c(&amp;quot;a&amp;quot;,&amp;quot;b&amp;quot;,&amp;quot;c&amp;quot;),each=3), y=c(1,3,6), v=1:9);
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;行列选择&quot;&gt;&lt;a href=&quot;#行列选择&quot; class=&quot;headerlink&quot; title=&quot;行列选择&quot;&gt;&lt;/a&gt;行列选择&lt;/h2&gt;&lt;p&gt;DT;&lt;br&gt;DT[2];                 //第2行&lt;br&gt;DT[,v];                //第v列（向量形式）&lt;br&gt;DT[,list(v)];          //第v列（列表形式）&lt;br&gt;DT[2:3,sum(v)];        //第v列第2行和第3行之和&lt;br&gt;DT[2:5,cat(v,”\n”)];   //列出第2至第5行v列的值&lt;br&gt;DT[c(FALSE,TRUE)]      //列出偶数行的值&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT;
DT[2];  
DT[,v];
DT[,list(v)];
DT[2:3,sum(v)];
DT[2:5,cat(v,&amp;quot;\n&amp;quot;)];
DT[c(FALSE,TRUE)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;ol class=&quot;list-inline&quot;&gt;&lt;br&gt;    &lt;li&gt;1&lt;/li&gt;&lt;br&gt;    &lt;li&gt;2&lt;/li&gt;&lt;br&gt;    &lt;li&gt;3&lt;/li&gt;&lt;br&gt;    &lt;li&gt;4&lt;/li&gt;&lt;br&gt;    &lt;li&gt;5&lt;/li&gt;&lt;br&gt;    &lt;li&gt;6&lt;/li&gt;&lt;br&gt;    &lt;li&gt;7&lt;/li&gt;&lt;br&gt;    &lt;li&gt;8&lt;/li&gt;&lt;br&gt;    &lt;li&gt;9&lt;/li&gt;&lt;br&gt;&lt;/ol&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;p&gt;5&lt;br&gt;2 3 4 5&lt;br&gt;NULL&lt;/p&gt;
&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[,2,with=FALSE];
DT[&amp;quot;a&amp;quot;];
DT[y== 6]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;h2 id=&quot;分组计算&quot;&gt;&lt;a href=&quot;#分组计算&quot; class=&quot;headerlink&quot; title=&quot;分组计算&quot;&gt;&lt;/a&gt;分组计算&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;DT;
DT[,sum(v),by=x];
DT[,sum(v),by=key(DT)]
DT[&amp;quot;a&amp;quot;,sum(v)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[,sum(v),by=y]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;12&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[&amp;quot;a&amp;quot;,sum(v)]
DT[c(&amp;quot;a&amp;quot;,&amp;quot;b&amp;quot;),sum(v),by=.EACHI]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;6&lt;/p&gt;
&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;X = data.table(c(&amp;quot;b&amp;quot;,&amp;quot;c&amp;quot;),foo=c(4,2))
X
DT
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;foo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;h2 id=&quot;合并&quot;&gt;&lt;a href=&quot;#合并&quot; class=&quot;headerlink&quot; title=&quot;合并&quot;&gt;&lt;/a&gt;合并&lt;/h2&gt;&lt;p&gt;DT[X]          #join(i为data.table,i join to x 通过x的key值)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT[X]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;foo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[X,sum(v),by=.EACHI]      #join and eval j for each row in i
DT[X,sum(v),by=.EACHI]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[X,mult=&amp;quot;first&amp;quot;]          #first row of each group
DT[X,mult=&amp;quot;first&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;foo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[X,sum(v)*foo,by=.EACHI]  #join inherited scope
DT[X,sum(v)*foo,by=.EACHI]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;60&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;setkey(DT,x,y)
setkeyv(DT,c(&amp;quot;x&amp;quot;,&amp;quot;y&amp;quot;)
DT
DT[&amp;quot;a&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;h4 id=&quot;当-i-以列名的形式求值于data-table或list表达式中时，执行selfjoin操作&quot;&gt;&lt;a href=&quot;#当-i-以列名的形式求值于data-table或list表达式中时，执行selfjoin操作&quot; class=&quot;headerlink&quot; title=&quot;当 i 以列名的形式求值于data.table或list表达式中时，执行selfjoin操作&quot;&gt;&lt;/a&gt;当 i 以列名的形式求值于data.table或list表达式中时，执行selfjoin操作&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;DT
DT[&amp;quot;a&amp;quot;]
DT[.(&amp;quot;a&amp;quot;,1)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V2&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[list(&amp;quot;a&amp;quot;,3:5)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V2&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;by: a list() of expressions of column names,在data.table框架中被计算，因此列名是被当作一个变量，然后data.table 以by计算的值分组，为每一个组计算j的值。
当i是data.table时，DT[i,j,by=.EACHI],以DT里面每一行i值分组，你能同时合并(in i)并计算(in j)

DT
DT[,sum(v),by=.(y%%2)]
DT[X]
DT[X,sum(v),by=.EACHI]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;27&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;18&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;foo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;x = data.table(c(&amp;quot;b&amp;quot;,&amp;quot;c&amp;quot;),foo=c(4,2))
x
DT
DT[,.SD[2],by=x]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;foo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[,tail(.SD,2),by=x]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT
DT[,lapply(.SD,sum),by=x]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT
DT[,list(MySum=sum(v),
MyMin=min(v),
MyMax=max(v)),
by=.(x,y%%2)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;MySum&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;MyMin&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;MyMax&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[,sum(v),x][V1&amp;lt;20]
DT[,sum(v),x][order(-V1)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;V1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;24&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;print(DT[,z:=42L])
print(DT[,z:=NULL])
print(DT[&amp;quot;a&amp;quot;,v:=42L])

   x y v  z
1: a 1 1 42
2: a 3 2 42
3: a 6 3 42
4: b 1 4 42
5: b 3 5 42
6: b 6 6 42
7: c 1 7 42
8: c 3 8 42
9: c 6 9 42
   x y v
1: a 1 1
2: a 3 2
3: a 6 3
4: b 1 4
5: b 3 5
6: b 6 6
7: c 1 7
8: c 3 8
9: c 6 9
   x y  v
1: a 1 42
2: a 3 42
3: a 6 42
4: b 1  4
5: b 3  5
6: b 6  6
7: c 1  7
8: c 3  8
9: c 6  9

print(DT[&amp;quot;b&amp;quot;,v2:=84L])

   x y  v v2
1: a 1 42 NA
2: a 3 42 NA
3: a 6 42 NA
4: b 1  4 84
5: b 3  5 84
6: b 6  6 84
7: c 1  7 NA
8: c 3  8 NA
9: c 6  9 NA
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;add-new-column-by-reference-by-group&quot;&gt;&lt;a href=&quot;#add-new-column-by-reference-by-group&quot; class=&quot;headerlink&quot; title=&quot;add new column by reference by group&quot;&gt;&lt;/a&gt;add new column by reference by group&lt;/h1&gt;&lt;p&gt;#NB: postfix [] is shortcut to print()&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DT[,m:=mean(v),by=x][] 
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[,.SD[which.min(v)],by=x][]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT[!.(&amp;quot;a&amp;quot;)]
DT[!&amp;quot;a&amp;quot;]
DT[!2:4]
DT[x!=&amp;quot;b&amp;quot; | y!=3]
DT[!.(&amp;quot;b&amp;quot;,3)]
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;y&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;v2&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;42&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;DT1 = data.table(x=c(&amp;quot;c&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;), a=1:5)
DT2 = data.table(x=c(&amp;quot;d&amp;quot;, &amp;quot;c&amp;quot;, &amp;quot;b&amp;quot;), mul=6:8)
DT1
DT2
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;a&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;a&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;x&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;mul&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;d&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;c&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;b&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;library(data.table)
DT1[DT2,on=c(x=&amp;quot;x&amp;quot;)]

Error in `[.data.table`(DT1, DT2, on = c(x = &amp;quot;x&amp;quot;)): unused argument (on = c(x = &amp;quot;x&amp;quot;))

update.packages()

Error in contrib.url(repos, type): trying to use CRAN without setting a mirror

rownames(DT)
&lt;/code&gt;&lt;/pre&gt;&lt;ol class=&quot;list-inline&quot;&gt;&lt;br&gt;    &lt;li&gt;‘1’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘2’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘3’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘4’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘5’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘6’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘7’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘8’&lt;/li&gt;&lt;br&gt;    &lt;li&gt;‘9’&lt;/li&gt;&lt;br&gt;&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;typeof(colnames(DT))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;‘character’&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;t
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;R-data.table&lt;/p&gt;
&lt;p&gt;上一节介绍了最基本的如何操作data.frame的行列来实现各种功能需求的数据计算。这一节将介绍另外一个功能更加强大的R包:data.table&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;library(data.table)
DT = data.table(x=rep(c(&amp;quot;a&amp;quot;,&amp;quot;b&amp;quot;,&amp;quot;c&amp;quot;),each=3), y=c(1,3,6), v=1:9);
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>R数据处理</title>
    <link href="http://yoursite.com/2015/08/13/R%20%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"/>
    <id>http://yoursite.com/2015/08/13/R 数据处理/</id>
    <published>2015-08-13T04:54:26.000Z</published>
    <updated>2016-04-21T23:05:26.243Z</updated>
    
    <content type="html">&lt;h4 id=&quot;R-数据处理&quot;&gt;&lt;a href=&quot;#R-数据处理&quot; class=&quot;headerlink&quot; title=&quot;R 数据处理&quot;&gt;&lt;/a&gt;R 数据处理&lt;/h4&gt;&lt;p&gt;本节数据处理主要是针对data.frame数据结构，由最基本的方法到运用dplyr包，reshape包等对数据进行加工及运算。&lt;br&gt;下面通过具体实例学习R数据处理。&lt;/p&gt;
&lt;p&gt;这是三家公司的营收与利润数额。如果大家想一步步跟随本文进行尝试，那么请将下列内容输入（或者直接复制加粘贴）到自己的R终端窗口当中：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fy &amp;lt;- c(2010,2011,2012,2010,2011,2012,2010,2011,2012);
company &amp;lt;- c(&amp;quot;Apple&amp;quot;,&amp;quot;Apple&amp;quot;,&amp;quot;Apple&amp;quot;,&amp;quot;Google&amp;quot;,&amp;quot;Google&amp;quot;,&amp;quot;Google&amp;quot;,&amp;quot;Microsoft&amp;quot;,&amp;quot;Microsoft&amp;quot;,&amp;quot;Microsoft&amp;quot;); 
revenue &amp;lt;- c(65225,108249,156508,29321,37905,50175,62484,69943,73723);  
profit &amp;lt;- c(14013,25922,41733,8505,9737,10737,18760,23150,16978);
companiesData &amp;lt;- data.frame(fy, company, revenue, profit);
companiesData$fy &amp;lt;- as.factor(companiesData$fy);
companiesData;
str(companiesData)
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;




&lt;pre&gt;&lt;code&gt;&amp;apos;data.frame&amp;apos;:    9 obs. of  4 variables:
 $ fy     : Factor w/ 3 levels &amp;quot;2010&amp;quot;,&amp;quot;2011&amp;quot;,..: 1 2 3 1 2 3 1 2 3
 $ company: Factor w/ 3 levels &amp;quot;Apple&amp;quot;,&amp;quot;Google&amp;quot;,..: 1 1 1 2 2 2 3 3 3
 $ revenue: num  65225 108249 156508 29321 37905 ...
 $ profit : num  14013 25922 41733 8505 9737 ...
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;1-向现有数据框添加column&quot;&gt;&lt;a href=&quot;#1-向现有数据框添加column&quot; class=&quot;headerlink&quot; title=&quot;1 向现有数据框添加column&quot;&gt;&lt;/a&gt;1 向现有数据框添加column&lt;/h4&gt;&lt;p&gt;通过将利润除以营收再乘以100的方式添加一个“margin”（利润率）column：&lt;/p&gt;
&lt;h6 id=&quot;1-1&quot;&gt;&lt;a href=&quot;#1-1&quot; class=&quot;headerlink&quot; title=&quot;1.1&quot;&gt;&lt;/a&gt;1.1&lt;/h6&gt;&lt;pre&gt;&lt;code&gt;companiesData$margin &amp;lt;- (companiesData$profit / companiesData$revenue)*100;
companiesData;
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.48409&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.94664&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.66509&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29.00651&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.6879&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.3991&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30.02369&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.09838&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23.02945&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;companiesData$margin &amp;lt;- round(companiesData$margin, 1);
companiesData;
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;




&lt;h6 id=&quot;1-2-transform-函数&quot;&gt;&lt;a href=&quot;#1-2-transform-函数&quot; class=&quot;headerlink&quot; title=&quot;1.2 transform 函数&quot;&gt;&lt;/a&gt;1.2 transform 函数&lt;/h6&gt;&lt;pre&gt;&lt;code&gt;companiesData &amp;lt;- transform(companiesData, margin = (profit/revenue) * 100);
companiesData
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.48409&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.94664&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.66509&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29.00651&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.6879&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.3991&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30.02369&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.09838&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23.02945&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;companiesData &amp;lt;- transform(companiesData, margin = round((profit/revenue) * 100, 1));
companiesData
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;




&lt;h6 id=&quot;1-3-apply函数&quot;&gt;&lt;a href=&quot;#1-3-apply函数&quot; class=&quot;headerlink&quot; title=&quot;1.3 apply函数&quot;&gt;&lt;/a&gt;1.3 apply函数&lt;/h6&gt;&lt;p&gt;dataFrame$newColumn &amp;lt;- apply(dataFrame, 1, function(x) { . . . } );&lt;br&gt;1代表对row应用函数，2代表对列应用函数&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;companiesData$margin &amp;lt;- apply(companiesData[,c(&amp;apos;revenue&amp;apos;, &amp;apos;profit&amp;apos;)], 1, function(x) { (x[2]/x[1]) * 100 });
companiesData
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.48409&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.94664&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.66509&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29.00651&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.6879&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.3991&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30.02369&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.09838&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23.02945&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;


&lt;pre&gt;&lt;code&gt;companiesData$margin &amp;lt;- mapply(function(x, y) round((x/y) * 100, 1)companiesData$profit, companiesData$revenue);
companiesData
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;highestMargin &amp;lt;- companiesData[companiesData$margin == max(companiesData$margin),];
highestMargin
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;

&lt;pre&gt;&lt;code&gt;highestMargin &amp;lt;- subset(companiesData, margin==max(margin));
highestMargin
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;


&lt;pre&gt;&lt;code&gt;library(plyr);
highestProfitMargins &amp;lt;- ddply(companiesData, &amp;apos;company&amp;apos;, summarize, bestMargin = max(margin));
highestProfitMargins
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;bestMargin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;myResults &amp;lt;- ddply(companiesData, &amp;apos;company&amp;apos;, transform, highestMargin = max(margin), lowestMargin = min(margin));
myResults
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;highestMargin&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;lowestMargin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;highestProfitMargins &amp;lt;- ddply(companiesData, &amp;apos;company&amp;apos;, function(x) x[x$margin==max(x$margin),]);
highestProfitMargins
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;




&lt;h6 id=&quot;companiesData-companiesDate-margin-max-companiesData-margin&quot;&gt;&lt;a href=&quot;#companiesData-companiesDate-margin-max-companiesData-margin&quot; class=&quot;headerlink&quot; title=&quot;companiesData[companiesDate\$margin==max(companiesData$margin),];&quot;&gt;&lt;/a&gt;companiesData[companiesDate\$margin==max(companiesData$margin),];&lt;/h6&gt;&lt;p&gt;这部分代码本身并没有使用ddply()，因此得到的是最高全局利润率而非各公司最高利润率。不过由于匿名函数被加入到ddply()声明当中，而ddply()又已经按照公司名称对数据框进行了分割，所以返回的匹配行仍然符合按不同公司计算的要求。&lt;/p&gt;
&lt;h6 id=&quot;要利用ddply-查看整个数据集中的最高利润率，而非根据公司category划分的子集，我们可以在第二个参数中输入NULL使分割factor变为无效：&quot;&gt;&lt;a href=&quot;#要利用ddply-查看整个数据集中的最高利润率，而非根据公司category划分的子集，我们可以在第二个参数中输入NULL使分割factor变为无效：&quot; class=&quot;headerlink&quot; title=&quot;要利用ddply()查看整个数据集中的最高利润率，而非根据公司category划分的子集，我们可以在第二个参数中输入NULL使分割factor变为无效：&quot;&gt;&lt;/a&gt;要利用ddply()查看整个数据集中的最高利润率，而非根据公司category划分的子集，我们可以在第二个参数中输入NULL使分割factor变为无效：&lt;/h6&gt;&lt;pre&gt;&lt;code&gt;highestProfitMargin &amp;lt;- ddply(companiesData, NULL, summarize, bestMargin = max(margin));
highestProfitMargin
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;.id&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;bestMargin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;NA&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;companiesOrdered &amp;lt;- companiesData[order(-companiesData$margin),];
companiesOrdered
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;companiesData[order(companiesData$fy, -companiesData$margin),];
companiesData
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;







&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;library(reshape2);
companiesLong &amp;lt;- melt(companiesData, c(&amp;quot;fy&amp;quot;, &amp;quot;company&amp;quot;));
companiesLong
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;variable&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;value&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;13&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;14&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;15&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;16&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;17&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;18&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;19&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;20&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;21&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;22&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;23&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;24&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;25&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;26&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;27&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;companiesLong &amp;lt;- melt(companiesData, id.vars=c(&amp;quot;fy&amp;quot;, &amp;quot;company&amp;quot;),
                  measure.vars=c(&amp;quot;revenue&amp;quot;, &amp;quot;profit&amp;quot;, &amp;quot;margin&amp;quot;),
                  variable.name=&amp;quot;financialCategory&amp;quot;, value.name=&amp;quot;amount&amp;quot;);
companiesLong
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;financialCategory&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;amount&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;revenue&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;13&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;14&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;15&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;16&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;17&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;18&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;profit&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;19&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;20&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;21&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;22&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;23&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;24&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;25&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;26&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;27&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;margin&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;






&lt;pre&gt;&lt;code&gt;companiesWide &amp;lt;- dcast(companiesLong, fy + company ~ financialCategory, value.var=&amp;quot;amount&amp;quot;);
companiesWide
&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;br&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;fy&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;company&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;revenue&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;profit&lt;/th&gt;&lt;th scope=&quot;col&quot;&gt;margin&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;br&gt;&lt;tbody&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;65225&lt;/td&gt;&lt;td&gt;14013&lt;/td&gt;&lt;td&gt;21.5&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;29321&lt;/td&gt;&lt;td&gt;8505&lt;/td&gt;&lt;td&gt;29&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;&lt;td&gt;2010&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;62484&lt;/td&gt;&lt;td&gt;18760&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;108249&lt;/td&gt;&lt;td&gt;25922&lt;/td&gt;&lt;td&gt;23.9&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;37905&lt;/td&gt;&lt;td&gt;9737&lt;/td&gt;&lt;td&gt;25.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;&lt;td&gt;2011&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;69943&lt;/td&gt;&lt;td&gt;23150&lt;/td&gt;&lt;td&gt;33.1&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Apple&lt;/td&gt;&lt;td&gt;156508&lt;/td&gt;&lt;td&gt;41733&lt;/td&gt;&lt;td&gt;26.7&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Google&lt;/td&gt;&lt;td&gt;50175&lt;/td&gt;&lt;td&gt;10737&lt;/td&gt;&lt;td&gt;21.4&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;    &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;&lt;td&gt;2012&lt;/td&gt;&lt;td&gt;Microsoft&lt;/td&gt;&lt;td&gt;73723&lt;/td&gt;&lt;td&gt;16978&lt;/td&gt;&lt;td&gt;23&lt;/td&gt;&lt;/tr&gt;&lt;br&gt;&lt;/tbody&gt;&lt;br&gt;&lt;/table&gt;


&lt;p&gt;dcast()会将long数据框的名称作为第一项参数。大家需要遵循以下语法创建公式来充当第二项参数：&lt;br&gt;id variables ~ variable variables&lt;br&gt;其中ID与measurement变量由波浪线隔开。如果波浪线两端的变量不止一个，那么各变量彼此之间要用“加号”分隔。&lt;br&gt;第三项参数用于让dcast()将包含measurement值的列名称分配给value.var。&lt;/p&gt;
&lt;p&gt;第二节将介绍data.table包，这是一个功能更加强大，速度更快的数据处理包。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;R-数据处理&quot;&gt;&lt;a href=&quot;#R-数据处理&quot; class=&quot;headerlink&quot; title=&quot;R 数据处理&quot;&gt;&lt;/a&gt;R 数据处理&lt;/h4&gt;&lt;p&gt;本节数据处理主要是针对data.frame数据结构，由最基本的方法到运用dplyr包，reshape包等对数据进行加工及运算。&lt;br&gt;下面通过具体实例学习R数据处理。&lt;/p&gt;
&lt;p&gt;这是三家公司的营收与利润数额。如果大家想一步步跟随本文进行尝试，那么请将下列内容输入（或者直接复制加粘贴）到自己的R终端窗口当中：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fy &amp;lt;- c(2010,2011,2012,2010,2011,2012,2010,2011,2012);
company &amp;lt;- c(&amp;quot;Apple&amp;quot;,&amp;quot;Apple&amp;quot;,&amp;quot;Apple&amp;quot;,&amp;quot;Google&amp;quot;,&amp;quot;Google&amp;quot;,&amp;quot;Google&amp;quot;,&amp;quot;Microsoft&amp;quot;,&amp;quot;Microsoft&amp;quot;,&amp;quot;Microsoft&amp;quot;); 
revenue &amp;lt;- c(65225,108249,156508,29321,37905,50175,62484,69943,73723);  
profit &amp;lt;- c(14013,25922,41733,8505,9737,10737,18760,23150,16978);
companiesData &amp;lt;- data.frame(fy, company, revenue, profit);
companiesData$fy &amp;lt;- as.factor(companiesData$fy);
companiesData;
str(companiesData)
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>R文本处理</title>
    <link href="http://yoursite.com/2015/08/12/R%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86/"/>
    <id>http://yoursite.com/2015/08/12/R文本处理/</id>
    <published>2015-08-12T04:54:26.000Z</published>
    <updated>2016-04-21T06:26:39.318Z</updated>
    
    <content type="html">&lt;h4 id=&quot;1-字符串统计和字符翻译&quot;&gt;&lt;a href=&quot;#1-字符串统计和字符翻译&quot; class=&quot;headerlink&quot; title=&quot;1 字符串统计和字符翻译&quot;&gt;&lt;/a&gt;1 字符串统计和字符翻译&lt;/h4&gt;&lt;p&gt;1.1 nchar和length&lt;br&gt;nchar向量元素的字符个数，length向量长度（向量元素的个数）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;Hellow&amp;quot;, &amp;quot;World&amp;quot;, &amp;quot;!&amp;quot;);
nchar(x) /6,5,1
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;pre&gt;&lt;code&gt;nchar(&amp;quot;&amp;quot;); /0
length(&amp;quot;&amp;quot;); /1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;1.2 tolower,toupper和chartr&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;DNA &amp;lt;- &amp;quot;AtGCtttACC&amp;quot; ;
tolower(DNA); /&amp;apos;atgctttacc&amp;apos;
toupper(DNA); /&amp;apos;ATGCTTTACC&amp;apos;    
chartr(&amp;quot;Tt&amp;quot;,&amp;quot;Uu&amp;quot;,DNA); /&amp;apos;AuGCuuuACC&amp;apos;    
chartr(&amp;quot;Tt&amp;quot;, &amp;quot;UU&amp;quot;, DNA); /&amp;apos;AUGCUUUACC&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;2-字符串连接&quot;&gt;&lt;a href=&quot;#2-字符串连接&quot; class=&quot;headerlink&quot; title=&quot;2 字符串连接&quot;&gt;&lt;/a&gt;2 字符串连接&lt;/h4&gt;&lt;p&gt;2.1 paste函数&lt;br&gt;把向量连接成字串向量，较短的向量被循环使用。其他类型的数据会转换成向量&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;paste(&amp;quot;CK&amp;quot;, 1:6, sep = &amp;quot;&amp;quot;); /&amp;quot;ck1&amp;quot; &amp;quot;ck2&amp;quot; &amp;quot;ck3&amp;quot; &amp;quot;ck4&amp;quot; &amp;quot;ck5&amp;quot; &amp;quot;ck6&amp;quot;
x &amp;lt;- list(a = &amp;quot;aaa&amp;quot;, b = &amp;quot;bbb&amp;quot;, c = &amp;quot;ccc&amp;quot;);
y &amp;lt;- list(d = 1, e = 2);
paste(x,y,sep = &amp;quot;-&amp;quot;); /&amp;quot;aaa-1&amp;quot; &amp;quot;bbb-2&amp;quot; &amp;quot;ccc-1&amp;quot;
paste(x,y,collapse = &amp;quot;;&amp;quot;) /&amp;quot;aaa 1;bbb 2;ccc 1&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;3-字符串拆分&quot;&gt;&lt;a href=&quot;#3-字符串拆分&quot; class=&quot;headerlink&quot; title=&quot;3 字符串拆分&quot;&gt;&lt;/a&gt;3 字符串拆分&lt;/h4&gt;&lt;p&gt;3.1 strsplit函数&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;strsplit函数使用正则表达式，使用格式为:&lt;br&gt;    strsplit(x, split, fixed = FALSE, perl = FALSE, useBytes = FALSE)&lt;br&gt;    参数x为字串向量，每个元素都将单独进行拆分。&lt;br&gt;    参数split为拆分位置的字串向量，默认为正则表达式匹配（fixed=FALSE）。如果你没接触过正则表达式，设置fixed=TRUE，表示使用普通文本匹配或正则表达式的精确匹配。普通文本的运算速度快。&lt;br&gt;    perl=TRUE/FALSE的设置和perl语言版本有关，如果正则表达式很长，正确设置表达式并且使用perl=TRUE可以提高运算速度。&lt;br&gt;    参数useBytes设置是否逐个字节进行匹配，默认为FALSE，即按字符而不是字节进行匹配&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;text &amp;lt;- &amp;quot;Hello Adam!\nHello Ava!&amp;quot;; 
strsplit(text, &amp;quot; &amp;quot;);    /&amp;quot;Hello&amp;quot; &amp;quot;Adam!\nHello&amp;quot; &amp;quot;Ava!&amp;quot;
strsplit(text, &amp;quot;\\s&amp;quot;);    /&amp;quot;Hello&amp;quot; &amp;quot;Adam!&amp;quot; &amp;quot;Hello&amp;quot; &amp;quot;Ava!&amp;quot;
strsplit(text, &amp;quot;&amp;quot;);        /&amp;quot;H&amp;quot;  &amp;quot;e&amp;quot;  &amp;quot;l&amp;quot;  &amp;quot;l&amp;quot;  &amp;quot;o&amp;quot;  &amp;quot; &amp;quot;  &amp;quot;A&amp;quot;  &amp;quot;d&amp;quot;  &amp;quot;a&amp;quot;  &amp;quot;m&amp;quot;  &amp;quot;!&amp;quot;  &amp;quot;\n&amp;quot; &amp;quot;H&amp;quot;  &amp;quot;e&amp;quot;  &amp;quot;l&amp;quot;  &amp;quot;l&amp;quot;  &amp;quot;o&amp;quot;  &amp;quot; &amp;quot;  &amp;quot;A&amp;quot;  &amp;quot;v&amp;quot;  &amp;quot;a&amp;quot;  &amp;quot;!&amp;quot; 
class(strsplit(text, &amp;quot; &amp;quot;));  /&amp;quot;list&amp;quot;
class(text)  /&amp;quot;character&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;4-字符串查询&quot;&gt;&lt;a href=&quot;#4-字符串查询&quot; class=&quot;headerlink&quot; title=&quot;4 字符串查询&quot;&gt;&lt;/a&gt;4 字符串查询&lt;/h4&gt;&lt;p&gt;4.1 grep 和 grepl函数&lt;br&gt;在正则表达式中匹配元字符本身，比如在文本中查找问号“?”， 那么就要使用引用符号（或称换码符号），一般是反斜杠 “\”。需要注意的是，在R语言中得用两个反斜杠&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;files&amp;lt;-list.files(&amp;quot;/home/..&amp;quot;); 
files;
grep(&amp;quot;\\.idx$&amp;quot;,files); 
grepl(&amp;quot;\\.idx$&amp;quot;, files)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;4.2 regexpr , gregexpr和regexec&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;text &amp;lt;- c(&amp;quot;Hellow, Adam!&amp;quot;, &amp;quot;Hi, Adam!&amp;quot;, &amp;quot;How are you, Adam.&amp;quot;);
regexpr(&amp;quot;Adam&amp;quot;, text);
gregexpr(&amp;quot;Adam&amp;quot;,text);
regexec(&amp;quot;Adam&amp;quot;,text)
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;5-字符串替换&quot;&gt;&lt;a href=&quot;#5-字符串替换&quot; class=&quot;headerlink&quot; title=&quot;5 字符串替换&quot;&gt;&lt;/a&gt;5 字符串替换&lt;/h4&gt;&lt;p&gt;5.1 sub和gsub函数&lt;br&gt;虽然sub和gsub是用于字符串替换的函数，但严格地说R语言没有字符串替换的函数，因为R语言不管什么操作对参数都是传值不传址&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sub(pattern = &amp;quot;Adam&amp;quot;, replacement = &amp;quot;world&amp;quot;, text); / &amp;quot;Hellow, world!&amp;quot;      &amp;quot;Hi, world!&amp;quot;          &amp;quot;How are you, world.&amp;quot;
sub(pattern = &amp;quot;Adam|Hi&amp;quot;, replacement = &amp;quot;world&amp;quot;, text); /&amp;quot;Hellow, world!&amp;quot;      &amp;quot;world, Adam!&amp;quot;        &amp;quot;How are you, world.&amp;quot;
gsub(pattern = &amp;quot;Adam|Hi&amp;quot;, replacement = &amp;quot;world&amp;quot;, text) /&amp;quot;Hellow, world!&amp;quot;      &amp;quot;world, world!&amp;quot;       &amp;quot;How are you, world.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;sub和gsub函数可以使用提取表达式（转义字符+数字）让部分变成全部。圆括号代表组，数字代表对应的组号&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sub(pattern = &amp;quot;.*(Hellow).*(Adam).*&amp;quot;, replacement = &amp;quot;\\1\\2&amp;quot;, text)  / &amp;quot;HellowAdam&amp;quot;         &amp;quot;Hi, Adam!&amp;quot;          &amp;quot;How are you, Adam.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;6 字符串提取&lt;/p&gt;
&lt;h5 id=&quot;6-1-substr-和-substring-函数&quot;&gt;&lt;a href=&quot;#6-1-substr-和-substring-函数&quot; class=&quot;headerlink&quot; title=&quot;6.1 substr 和 substring 函数&quot;&gt;&lt;/a&gt;6.1 substr 和 substring 函数&lt;/h5&gt;&lt;p&gt;substr(x, start, stop)&lt;br&gt;substr返回的字串个数等于第一个参数的长度&lt;br&gt;而substring返回字串个数等于三个参数中最长向量长度，短向量循环使用&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;x &amp;lt;- &amp;quot;123456789&amp;quot;;
substr(x, c(2, 3), c(4, 5, 8));  /&amp;quot;234&amp;quot;
substring(x, c(2, 3), c(4, 5, 8))  /&amp;quot;234&amp;quot; &amp;quot;345&amp;quot; &amp;quot;2345678&amp;quot;

x &amp;lt;- c(&amp;quot;123456789&amp;quot;, &amp;quot;abcdefghijklmnopq&amp;quot;);
substr(x, c(2, 3), c(4, 5, 8))  /&amp;quot;234&amp;quot; &amp;quot;cde&amp;quot;

DNA &amp;lt;- &amp;quot;GCAGCGCATATG&amp;quot;;
substring(DNA, seq(1, 10, by = 3), seq(3, 12, by = 3)) /&amp;quot;GCA&amp;quot; &amp;quot;GCG&amp;quot; &amp;quot;CAT&amp;quot; &amp;quot;ATG&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;7-其他&quot;&gt;&lt;a href=&quot;#7-其他&quot; class=&quot;headerlink&quot; title=&quot;7 其他&quot;&gt;&lt;/a&gt;7 其他&lt;/h4&gt;&lt;p&gt;7.1 strtrim 函数&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;strtrim(c(&amp;quot;abcdef&amp;quot;, &amp;quot;abcdef&amp;quot;, &amp;quot;abcdef&amp;quot;), c(1, 5, 10))  /&amp;quot;a&amp;quot; &amp;quot;abcde&amp;quot; &amp;quot;abcdef&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;7.2 strwrap 函数&lt;br&gt;该函数把一个字符串当成一个段落的文字（不管字符串中是否有换行符），按照段落的格式（缩进和长度）和断字方式进行分行，每一行是结果中的一个字符串。例如：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;str1 &amp;lt;- &amp;quot;Each character string in the input is first split into paragraphs\n(or lines containing whitespace only). The paragraphs are then\nformatted by breaking lines at word boundaries. The target\ncolumns for wrapping lines and the indentation of the first and\nall subsequent lines of a paragraph can be controlled\nindependently.&amp;quot;;
str2 &amp;lt;- rep(str1, 2);
str2;
strwrap(str2, width = 80, indent = 2) s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;7.3 match 和 charmatch&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;match(&amp;quot;xx&amp;quot;, c(&amp;quot;abc&amp;quot;, &amp;quot;xx&amp;quot;, &amp;quot;xxx&amp;quot;, &amp;quot;xx&amp;quot;)) /2
charmatch(&amp;quot;xx&amp;quot;, &amp;quot;xx&amp;quot;); /1
charmatch(&amp;quot;xx&amp;quot;, &amp;quot;xxa&amp;quot;); /1 
charmatch(&amp;quot;xx&amp;quot;, &amp;quot;axx&amp;quot;)  /NA
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;1-字符串统计和字符翻译&quot;&gt;&lt;a href=&quot;#1-字符串统计和字符翻译&quot; class=&quot;headerlink&quot; title=&quot;1 字符串统计和字符翻译&quot;&gt;&lt;/a&gt;1 字符串统计和字符翻译&lt;/h4&gt;&lt;p&gt;1.1 nchar和length&lt;br&gt;nchar向量元素的字符个数，length向量长度（向量元素的个数）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;Hellow&amp;quot;, &amp;quot;World&amp;quot;, &amp;quot;!&amp;quot;);
nchar(x) /6,5,1
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>R 常用命令解析</title>
    <link href="http://yoursite.com/2015/08/11/R%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2015/08/11/R常用命令解析/</id>
    <published>2015-08-11T04:54:26.000Z</published>
    <updated>2016-04-22T01:44:01.769Z</updated>
    
    <content type="html">&lt;p&gt;R是一门解释型语言。R的所有操作都是函数操作。&lt;br&gt;b&amp;lt;-1:5;会被解析为 assign(‘b’,seq(1:5))&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;R 常用命令&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;search() 查看R启动时默认加载的7个核心包
ls(),objects()查看当前环境中的变量
paste() 把单独的字符连成字符串
mode(),length() 对象内在属性：模式和长度
attributes() 对象当前定义的非内在属性列表
attr(object,name) 设置对象外部属性
class() 对象的类属性
cbind(),rbind() 列和行的合并
table() 因子的频率
methods(generic.function,class) 列出泛型函数所有可用方法，或者是列出类对象的可用泛型函数列表。如methods(class=&amp;quot;data.frame&amp;quot;)，methods(plot)
str() 显示任意对象的内部结构
options() 允许用户设置一些全局选项从而影响显示结果。如 options(width=700)设置屏幕行容纳宽度
install.packages() 安装包
updata.packages() 更新包。会把所有需要更新的包列出来，然后通过交互的方式更新你所需要的包。
getwd() 列出当前工作目录
setwd(&amp;quot;&amp;quot;) 设置当前工作目录
save.image(objectlist, file=&amp;quot;myfile&amp;quot;) 保存当前工作环境
load(&amp;quot;myfile&amp;quot;) 加载工作环境
source(&amp;quot;&amp;quot;) 执行外部脚本文件
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;R是一门解释型语言。R的所有操作都是函数操作。&lt;br&gt;b&amp;lt;-1:5;会被解析为 assign(‘b’,seq(1:5))&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>rem单位详解及应用</title>
    <link href="http://yoursite.com/2015/03/27/rem%E5%8D%95%E4%BD%8D%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2015/03/27/rem单位详解/</id>
    <published>2015-03-27T00:06:26.000Z</published>
    <updated>2016-04-21T23:06:14.106Z</updated>
    
    <content type="html">&lt;p&gt;rem（font size of the root element）是指相对于根元素的字体大小的单位。&lt;br&gt;我们经常会看到rem值设置为62.5%，&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;html {font-size: 62.5%;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这是因为现在浏览器中的默认的字体大小都是16px，62.5%*16px=10px;所以1rem=10px;方便计算。但是这有一个bug,就是中文版的chrome支持的最小字体是12px,那么1rem最小值就是12px,而不是10px了。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;可以从两个方面解决这个bug，&lt;br&gt;1.设置1rem=100px;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;html {font-size: 625%;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.采用绝对的px值设置。如&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;html {font-size:20px;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;到这里肯定有很多人会问我怎么计算出不同分辨率下rem的值？&lt;br&gt;在移动端，随着iphone6和plus的加入，屏幕像素宽度有320，384，480，640，1080等，大有赶上电脑屏幕的趋势阿。我们可以通过JS去动态计算根元素的font-size，这样的好处是所有设备分辨率都能兼容适配。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(function (doc, win) {
var docEl = doc.documentElement,
    resizeEvt = &amp;apos;orientationchange&amp;apos; in window ? &amp;apos;orientationchange&amp;apos; : &amp;apos;resize&amp;apos;,
    recalc = function () {
                          var clientWidth = docEl.clientWidth;
                          if (!clientWidth) return;
                          docEl.style.fontSize = 20 * (clientWidth / 320) + &amp;apos;px&amp;apos;;
                          };
      if (!doc.addEventListener) return;
      win.addEventListener(resizeEvt, recalc, false);
      doc.addEventListener(&amp;apos;DOMContentLoaded&amp;apos;, recalc, false);
    })(document, window);
&lt;/code&gt;&lt;/pre&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;rem（font size of the root element）是指相对于根元素的字体大小的单位。&lt;br&gt;我们经常会看到rem值设置为62.5%，&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;html {font-size: 62.5%;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这是因为现在浏览器中的默认的字体大小都是16px，62.5%*16px=10px;所以1rem=10px;方便计算。但是这有一个bug,就是中文版的chrome支持的最小字体是12px,那么1rem最小值就是12px,而不是10px了。&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
</feed>
